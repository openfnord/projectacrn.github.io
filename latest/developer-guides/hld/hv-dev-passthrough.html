<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Device Passthrough &mdash; Project ACRN™ 3.0-unstable documentation</title><link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sphinx_tabs/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/acrn-custom.css" type="text/css" /><link rel="shortcut icon" href="../../_static/ACRN-favicon-32x32.png"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/acrn-custom.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="MMIO Device Passthrough" href="mmio-dev-passthrough.html" />
    <link rel="prev" title="VT-d" href="hv-vt-d.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> Project ACRN™<img src="../../_static/ACRN_Logo_200w.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                latest
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Project ACRN</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Versions</dt>
        
          <dd><a href="/latest/">latest</a></dd>
        
          <dd><a href="/2.7/">2.7</a></dd>
        
          <dd><a href="/2.6/">2.6</a></dd>
        
          <dd><a href="/2.5/">2.5</a></dd>
        
          <dd><a href="/2.0/">2.0</a></dd>
        
          <dd><a href="/1.6.1/">1.6.1</a></dd>
        
          <dd><a href="/1.0/">1.0</a></dd>
        
      </dl>
      <dl>
        <dt>projectacrn.org links</dt>
          <dd>
            <a href="https://www.projectacrn.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/projectacrn/acrn-hypervisor/wiki">Wiki</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../index.html">Documentation Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction/index.html">What Is ACRN</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#id1">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#licensing">Licensing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#key-capabilities">Key Capabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#community-support">Community Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#resources">Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#background">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#high-level-architecture">High-Level Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#acrn-device-model-architecture">ACRN Device Model Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#device-passthrough">Device Passthrough</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../introduction/index.html#hardware-support-for-device-passthrough">Hardware Support for Device Passthrough</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../introduction/index.html#hypervisor-support-for-device-passthrough">Hypervisor Support for Device Passthrough</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#static-configuration-based-on-scenarios">Static Configuration Based on Scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#predefined-sample-scenarios">Predefined Sample Scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#boot-sequence">Boot Sequence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../introduction/index.html#learn-more">Learn More</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../try.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../reference/hardware.html">Supported Hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../reference/hardware.html#selecting-hardware">Selecting Hardware</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/overview_dev.html">Configuration and Development Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/overview_dev.html#development-environment">Development Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/overview_dev.html#general-process-for-building-an-acrn-hypervisor">General Process for Building an ACRN Hypervisor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/overview_dev.html#icon-light-step-1-select-hardware-and-scenario"> Step 1: Select Hardware and Scenario</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting-started/overview_dev.html#select-your-hardware">Select Your Hardware</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting-started/overview_dev.html#select-your-scenario">Select Your Scenario</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/overview_dev.html#icon-host-step-2-prepare-the-development-computer"> Step 2: Prepare the Development Computer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/overview_dev.html#icon-target-step-3-generate-a-board-configuration-file"> Step 3: Generate a Board Configuration File</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting-started/overview_dev.html#configure-bios-settings">Configure BIOS Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting-started/overview_dev.html#use-the-board-inspector-to-generate-a-board-configuration-file">Use the Board Inspector to Generate a Board Configuration File</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/overview_dev.html#icon-host-step-4-generate-a-scenario-configuration-file-and-launch-scripts"> Step 4: Generate a Scenario Configuration File and Launch Scripts</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting-started/overview_dev.html#generate-a-scenario-configuration-file">Generate a Scenario Configuration File</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting-started/overview_dev.html#generate-launch-scripts">Generate Launch Scripts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/overview_dev.html#icon-host-step-5-build-acrn"> Step 5: Build ACRN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/overview_dev.html#icon-target-step-6-install-and-run-acrn"> Step 6: Install and Run ACRN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/overview_dev.html#learn-more">Learn More</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../getting-started/getting-started.html">Getting Started Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/getting-started.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/getting-started.html#set-up-the-target-hardware">Set Up the Target Hardware</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/getting-started.html#prepare-the-development-computer">Prepare the Development Computer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/getting-started.html#prepare-the-target-and-generate-a-board-configuration-file">Prepare the Target and Generate a Board Configuration File</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../getting-started/getting-started.html#install-os-on-the-target">Install OS on the Target</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting-started/getting-started.html#configure-target-bios-settings">Configure Target BIOS Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../getting-started/getting-started.html#generate-a-board-configuration-file">Generate a Board Configuration File</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/getting-started.html#generate-a-scenario-configuration-file-and-launch-script">Generate a Scenario Configuration File and Launch Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/getting-started.html#build-acrn">Build ACRN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/getting-started.html#install-acrn">Install ACRN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/getting-started.html#run-acrn-and-the-service-vm">Run ACRN and the Service VM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/getting-started.html#launch-the-user-vm">Launch the User VM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../getting-started/getting-started.html#next-steps">Next Steps</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../develop.html">Advanced Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../develop.html#advanced-scenario-tutorials">Advanced Scenario Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/using_hybrid_mode_on_nuc.html">Getting Started Guide for ACRN Hybrid Mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_hybrid_mode_on_nuc.html#set-up-base-installation">Set-up base installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_hybrid_mode_on_nuc.html#prepare-the-zephyr-image">Prepare the Zephyr image</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_hybrid_mode_on_nuc.html#set-up-acrn-on-your-device">Set-up ACRN on your device</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_hybrid_mode_on_nuc.html#update-ubuntu-grub">Update Ubuntu GRUB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_hybrid_mode_on_nuc.html#hybrid-scenario-startup-check">Hybrid Scenario Startup Check</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/using_partition_mode_on_nuc.html">Getting Started Guide for ACRN Partitioned Mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_partition_mode_on_nuc.html#validated-versions">Validated Versions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_partition_mode_on_nuc.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_partition_mode_on_nuc.html#update-kernel-image-and-modules-of-pre-launched-vm">Update Kernel Image and Modules of Pre-Launched VM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_partition_mode_on_nuc.html#update-acrn-hypervisor-image">Update ACRN Hypervisor Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_partition_mode_on_nuc.html#update-ubuntu-grub-to-boot-hypervisor-and-load-kernel-image">Update Ubuntu GRUB to Boot Hypervisor and Load Kernel Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_partition_mode_on_nuc.html#partitioned-scenario-startup-check">Partitioned Scenario Startup Check</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../develop.html#user-vm-tutorials">User VM Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/using_windows_as_user_vm.html">Launch Windows as the Guest VM on ACRN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_windows_as_user_vm.html#acrn-service-vm-setup">ACRN Service VM Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_windows_as_user_vm.html#setup-for-using-windows-as-the-guest-vm">Setup for Using Windows as the Guest VM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_windows_as_user_vm.html#acrn-windows-verified-feature-list">ACRN Windows Verified Feature List</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_windows_as_user_vm.html#explanation-for-acrn-dm-popular-command-lines">Explanation for acrn-dm Popular Command Lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_windows_as_user_vm.html#secure-boot-enabling">Secure Boot Enabling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_windows_as_user_vm.html#activate-windows-10">Activate Windows 10</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/using_xenomai_as_user_vm.html">Run Xenomai as the User VM OS (Real-Time VM)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_xenomai_as_user_vm.html#build-the-xenomai-kernel">Build the Xenomai Kernel</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_xenomai_as_user_vm.html#launch-the-rtvm">Launch the RTVM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_xenomai_as_user_vm.html#install-the-xenomai-libraries-and-tools">Install the Xenomai Libraries and Tools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/using_vxworks_as_user_vm.html">Run VxWorks as the User VM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_vxworks_as_user_vm.html#steps-for-using-vxworks-as-user-vm">Steps for Using VxWorks as User VM</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/using_zephyr_as_user_vm.html">Run Zephyr as the User VM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_zephyr_as_user_vm.html#introduction-to-zephyr">Introduction to Zephyr</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_zephyr_as_user_vm.html#steps-for-using-zephyr-as-user-vm">Steps for Using Zephyr as User VM</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../develop.html#configuration-tutorials">Configuration Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/acrn_configuration_tool.html">Introduction to ACRN Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn_configuration_tool.html#types-of-configurations">Types of Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn_configuration_tool.html#using-acrn-configuration-toolset">Using ACRN Configuration Toolset</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn_configuration_tool.html#acrn-configuration-data">ACRN Configuration Data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/board_inspector_tool.html">Board Inspector Tool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/board_inspector_tool.html#about-the-board-inspector-tool">About the Board Inspector Tool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/board_inspector_tool.html#generate-a-board-configuration-file">Generate a Board Configuration File</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/board_inspector_tool.html#command-line-options">Command-Line Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/acrn_configurator_tool.html">ACRN Configurator Tool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn_configurator_tool.html#about-the-acrn-configurator-tool">About the ACRN Configurator Tool</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn_configurator_tool.html#generate-a-scenario-configuration-file-and-launch-scripts">Generate a Scenario Configuration File and Launch Scripts</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/config-options.html">Scenario Configuration Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/config-options.html#common-option-value-types">Common Option Value Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/config-options.html#hv">hv</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/config-options.html#vm">vm</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/config-options-launch.html">Launch Configuration Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../reference/hv-make-options.html">Hypervisor Makefile Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../reference/hv-make-options.html#build-options-and-targets">Build Options and Targets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../reference/hv-make-options.html#makefile-targets-for-configuration">Makefile Targets for Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user-guides/hv-parameters.html">ACRN Hypervisor Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user-guides/hv-parameters.html#generic-hypervisor-parameters">Generic Hypervisor Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user-guides/kernel-parameters.html">ACRN Kernel Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user-guides/kernel-parameters.html#generic-kernel-parameters">Generic Kernel Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user-guides/acrn-dm-parameters.html">Device Model Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user-guides/acrn-dm-parameters.html#emulated-pci-device-types">Emulated PCI Device Types</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../misc/packaging/README.html">ACRN Installation via Debian Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/tar_installation.html">ACRN Installation via Tar Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/tar_installation.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/tar_installation.html#build-the-tar-files">Build the Tar Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/tar_installation.html#install-and-run-acrn">Install and Run ACRN</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../develop.html#advanced-features">Advanced Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/sgx_virtualization.html">Enable SGX Virtualization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/sgx_virtualization.html#high-level-acrn-sgx-virtualization-design">High-Level ACRN SGX Virtualization Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/sgx_virtualization.html#enable-sgx-support-for-guest">Enable SGX Support for Guest</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/sgx_virtualization.html#sgx-capability-exposure">SGX Capability Exposure</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/sgx_virtualization.html#enclave-system-function-handling">Enclave System Function Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/sgx_virtualization.html#other-vmexit-control">Other VMExit Control</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/sgx_virtualization.html#future-development">Future Development</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/nvmx_virtualization.html">Enable Nested Virtualization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/nvmx_virtualization.html#high-level-acrn-nested-virtualization-design">High-Level ACRN Nested Virtualization Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/nvmx_virtualization.html#restrictions-and-constraints">Restrictions and Constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/nvmx_virtualization.html#service-vm-configuration">Service VM Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/nvmx_virtualization.html#prepare-for-service-vm-kernel-and-rootfs">Prepare for Service VM Kernel and rootfs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/nvmx_virtualization.html#launch-a-nested-guest-vm">Launch a Nested Guest VM</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/vuart_configuration.html">Enable vUART Configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/vuart_configuration.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/vuart_configuration.html#console-enable-list">Console Enable List</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/vuart_configuration.html#how-to-configure-a-console-port">How to Configure a Console Port</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/vuart_configuration.html#how-to-configure-a-communication-port">How to Configure a Communication Port</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/vuart_configuration.html#communication-vuart-enable-list">Communication vUART Enable List</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/vuart_configuration.html#launch-script">Launch Script</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/vuart_configuration.html#test-the-communication-port">Test the Communication Port</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/vuart_configuration.html#vuart-design">vUART Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/vuart_configuration.html#com-port-configurations-for-post-launched-vms">COM Port Configurations for Post-Launched VMs</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/vuart_configuration.html#use-pci-vuart">Use PCI-vUART</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/vuart_configuration.html#pci-interface-of-acrn-vuart">PCI Interface of ACRN vUART</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/vuart_configuration.html#index-of-vuart">Index of vUART</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/vuart_configuration.html#setup-acrn-vuart-using-configuration-tools">Setup ACRN vUART Using Configuration Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/vuart_configuration.html#kernel-config-for-legacy-vuart">Kernel Config for Legacy vUART</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/vuart_configuration.html#kernel-cmdline-for-pci-vuart-console">Kernel Cmdline for PCI-vUART Console</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/rdt_configuration.html">Enable RDT Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/rdt_configuration.html#rdt-detection-and-resource-capabilities">RDT Detection and Resource Capabilities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/rdt_configuration.html#tuning-rdt-resources-in-hv-debug-shell">Tuning RDT Resources in HV Debug Shell</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/rdt_configuration.html#configure-rdt-for-vm-using-vm-configuration">Configure RDT for VM Using VM Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/vcat_configuration.html">Enable vCAT Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/waag-secure-boot.html">Enable Secure Boot in Windows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/waag-secure-boot.html#generate-platform-key-pk">Generate Platform Key (PK)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/waag-secure-boot.html#download-kek-and-db-from-microsoft">Download KEK and DB From Microsoft</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/waag-secure-boot.html#compile-ovmf-with-secure-boot-support">Compile OVMF With Secure Boot Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/waag-secure-boot.html#use-qemu-to-inject-secure-boot-keys-into-ovmf">Use QEMU to Inject Secure Boot Keys Into OVMF</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/enable_s5.html">Enable S5 in ACRN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/enable_s5.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/enable_s5.html#s5-architecture">S5 Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/enable_s5.html#id2">Enable S5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/enable_s5.html#how-to-test">How to Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/enable_s5.html#system-shutdown">System Shutdown</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/cpu_sharing.html">Enable CPU Sharing in ACRN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/cpu_sharing.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/cpu_sharing.html#scheduling-framework">Scheduling Framework</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/cpu_sharing.html#cpu-affinity">CPU Affinity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/cpu_sharing.html#thread-object-state">Thread Object State</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/cpu_sharing.html#scheduler">Scheduler</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/cpu_sharing.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/sriov_virtualization.html">Enable SR-IOV Virtualization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/sriov_virtualization.html#sr-iov-architectural-overview">SR-IOV Architectural Overview</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/gpu-passthru.html">Enable GVT-d in ACRN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gpu-passthru.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gpu-passthru.html#verified-version">Verified Version</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gpu-passthru.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gpu-passthru.html#supported-hardware-platform">Supported Hardware Platform</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gpu-passthru.html#bios-settings">BIOS Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gpu-passthru.html#passthrough-the-gpu-to-guest">Passthrough the GPU to Guest</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/gpu-passthru.html#enable-the-gvt-d-gop-driver">Enable the GVT-d GOP Driver</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/run_kata_containers.html">Run Kata Containers on a Service VM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/run_kata_containers.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/run_kata_containers.html#install-docker">Install Docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/run_kata_containers.html#install-kata-containers">Install Kata Containers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/run_kata_containers.html#run-a-kata-container-with-acrn">Run a Kata Container With ACRN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/trustyACRN.html">Trusty and Security Services Reference</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/trustyACRN.html#trusty-architecture">Trusty Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/trustyACRN.html#trusty-services">Trusty Services</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/trustyACRN.html#trusty-in-acrn">Trusty in ACRN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/rtvm_workload_design_guideline.html">Real-Time VM Application Design Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/rtvm_workload_design_guideline.html#run-rtvm-with-dedicated-resources-devices">Run RTVM With Dedicated Resources/Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/rtvm_workload_design_guideline.html#rtvm-with-virtio-pmd-polling-mode-driver-for-i-o-sharing">RTVM With Virtio PMD (Polling Mode Driver) for I/O Sharing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/rtvm_workload_design_guideline.html#rtvm-with-hv-emulated-device">RTVM With HV Emulated Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/rtvm_workload_design_guideline.html#dm-emulated-device-except-pmd">DM Emulated Device (Except PMD)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/setup_openstack_libvirt.html">Configure ACRN Using OpenStack and Libvirt</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/setup_openstack_libvirt.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/setup_openstack_libvirt.html#install-acrn">Install ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/setup_openstack_libvirt.html#set-up-and-launch-lxc-lxd">Set Up and Launch LXC/LXD</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/setup_openstack_libvirt.html#set-up-acrn-prerequisites-inside-the-container">Set Up ACRN Prerequisites Inside the Container</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/setup_openstack_libvirt.html#set-up-libvirt">Set Up Libvirt</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/setup_openstack_libvirt.html#set-up-openstack">Set Up OpenStack</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/setup_openstack_libvirt.html#configure-and-create-openstack-instance">Configure and Create OpenStack Instance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/setup_openstack_libvirt.html#final-steps">Final Steps</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/acrn_on_qemu.html">Enable ACRN Over QEMU/KVM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn_on_qemu.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn_on_qemu.html#prepare-service-vm-l1-guest">Prepare Service VM (L1 Guest)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn_on_qemu.html#install-acrn-hypervisor">Install ACRN Hypervisor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn_on_qemu.html#bring-up-user-vm-l2-guest">Bring Up User VM (L2 Guest)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/using_grub.html">Using GRUB to Boot ACRN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_grub.html#using-pre-installed-grub">Using Pre-Installed GRUB</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_grub.html#installing-self-built-grub">Installing Self-Built GRUB</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/acrn-secure-boot-with-grub.html">Enable ACRN Secure Boot With GRUB</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn-secure-boot-with-grub.html#acrn-secure-boot-sequence">ACRN Secure Boot Sequence</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn-secure-boot-with-grub.html#generate-gpg-key">Generate GPG Key</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn-secure-boot-with-grub.html#setup-standalone-grub-efi-binary">Setup Standalone GRUB EFI Binary</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn-secure-boot-with-grub.html#enable-uefi-secure-boot">Enable UEFI Secure Boot</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/acrn-secure-boot-with-efi-stub.html">Enable ACRN Secure Boot With EFI-Stub</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn-secure-boot-with-efi-stub.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn-secure-boot-with-efi-stub.html#verified-configurations">Verified Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn-secure-boot-with-efi-stub.html#building">Building</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn-secure-boot-with-efi-stub.html#installing-without-sb-for-testing">Installing (without SB for testing)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/acrn-secure-boot-with-efi-stub.html#signing">Signing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/pre-launched-rt.html">Pre-Launched Preempt-RT Linux Mode in ACRN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/pre-launched-rt.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/pre-launched-rt.html#example-of-pre-launched-rt">Example of Pre-Launched RT</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/enable_ivshmem.html">Enable Inter-VM Communication Based on Ivshmem</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/enable_ivshmem.html#enable-ivshmem-support">Enable Ivshmem Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/enable_ivshmem.html#ivshmem-dm-land-usage">Ivshmem DM-Land Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/enable_ivshmem.html#ivshmem-hv-land-usage">Ivshmem HV-Land Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/enable_ivshmem.html#ivshmem-notification-mechanism">Ivshmem Notification Mechanism</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/enable_ivshmem.html#inter-vm-communication-examples">Inter-VM Communication Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/inter-vm_communication.html">ACRN Inter-VM Communication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/inter-vm_communication.html#inter-vm-vuart">Inter-VM vUART</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/inter-vm_communication.html#inter-vm-network-communication">Inter-VM network communication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/inter-vm_communication.html#inter-vm-shared-memory-communication-ivshmem">Inter-VM shared memory communication (ivshmem)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/inter-vm_communication.html#how-to-implement-an-ivshmem-application-on-acrn">How to implement an Ivshmem application on ACRN</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../develop.html#debug">Debug</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/using_serial_port.html">Enable Serial Port on NUC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_serial_port.html#option-1-using-the-serial-port-on-tgl-intel-nuc">Option 1: Using the Serial Port on TGL Intel NUC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/using_serial_port.html#option-2-enabling-pcie-serial-port-on-tgl-intel-nuc">Option 2: Enabling PCIe Serial Port on TGL Intel NUC</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/debug.html">ACRN Debugging Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/debug.html#acrn-console-command">ACRN Console Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/debug.html#an-example">An Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/debug.html#acrn-log">ACRN Log</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/debug.html#acrn-trace">ACRN Trace</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/realtime_performance_tuning.html">ACRN Real-Time (RT) Performance Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/realtime_performance_tuning.html#vmexit-analysis-for-acrn-rt-performance">vmexit Analysis for ACRN RT Performance</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/realtime_performance_tuning.html#collecting-performance-monitoring-counters-data">Collecting Performance Monitoring Counters Data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/rtvm_performance_tips.html">ACRN Real-Time VM Performance Tips</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/rtvm_performance_tips.html#background">Background</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/rtvm_performance_tips.html#mandatory-options-for-an-rtvm">Mandatory Options for an RTVM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/rtvm_performance_tips.html#avoid-vm-exit-latency">Avoid VM-exit Latency</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/rtvm_performance_tips.html#isolating-the-impact-of-neighbor-vms">Isolating the Impact of Neighbor VMs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/rtvm_performance_tips.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../user-guides/acrn-shell.html">ACRN Shell Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../user-guides/acrn-shell.html#command-examples">Command Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/README.html">ACRN-Crashlog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/README.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/README.html#building">Building</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/README.html#installing">Installing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/README.html#enabling-disabling">Enabling/Disabling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/README.html#source-code">Source Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/acrnprobe/README.html">Acrnprobe</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/acrnprobe/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/acrnprobe/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/acrnprobe/README.html#architecture">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/acrnprobe/README.html#source-files">Source Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/acrnprobe/README.html#configuration-files">Configuration Files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/acrnprobe/conf.html">Acrnprobe Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/acrnprobe/conf.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/acrnprobe/conf.html#layout">Layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/acrnprobe/conf.html#properties-of-group-members">Properties of Group Members</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/acrnprobe/conf.html#crash-tree-in-acrnprobe">Crash Tree in Acrnprobe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/acrnprobe/conf.html#sections">Sections</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/usercrash/README.html">Usercrash</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/usercrash/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/usercrash/README.html#design">Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/usercrash/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_crashlog/usercrash/README.html#source-code">Source Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../misc/debug_tools/acrn_log/README.html">Acrnlog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_log/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_log/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_log/README.html#build-and-install">Build and Install</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../misc/debug_tools/acrn_trace/README.html">Acrntrace</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_trace/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_trace/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/debug_tools/acrn_trace/README.html#build-and-install">Build and Install</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../misc/services/acrn_manager/README.html">Acrnctl and Acrnd</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../misc/services/acrn_manager/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/services/acrn_manager/README.html#acrnd">Acrnd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../misc/services/acrn_manager/README.html#build-and-install">Build and Install</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../contribute.html">Developer Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../contribute.html#design-guides">Design Guides</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../modularity.html">ACRN Hypervisor: Modular Design</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../modularity.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modularity.html#principles">Principles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modularity.html#architecture">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../modularity.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="reference internal" href="index.html">High-Level Design Guides</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="hld-overview.html">Overview</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="hld-hypervisor.html">Hypervisor</a></li>
<li class="toctree-l4"><a class="reference internal" href="hld-devicemodel.html">Device Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="hld-emulated-devices.html">Emulated Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="hld-virtio-devices.html">Virtio Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="hld-power-management.html">Power Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="hld-trace-log.html">Tracing and Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="hld-security.html">Security</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../sw_design_guidelines.html">Software Design Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../sw_design_guidelines.html#error-detection-and-error-handling">Error Detection and Error Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sw_design_guidelines.html#module-level-configuration-design-guidelines">Module Level Configuration Design Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../sw_design_guidelines.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../trusty.html">Trusty TEE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../trusty.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trusty.html#trusty-architecture">Trusty Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trusty.html#trusty-specific-hypercalls">Trusty Specific Hypercalls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trusty.html#trusty-boot-flow">Trusty Boot Flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../trusty.html#ept-hierarchy">EPT Hierarchy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../l1tf.html">L1 Terminal Fault Mitigation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../l1tf.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../l1tf.html#l1tf-problem-in-acrn">L1TF Problem in ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../l1tf.html#l1tf-mitigation-in-acrn">L1TF Mitigation in ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../l1tf.html#mitigation-recommendations">Mitigation Recommendations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../l1tf.html#mitigation-status">Mitigation Status</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute.html#contribute-guides">Contribute Guides</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../contribute_guidelines.html">Contribution Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../contribute_guidelines.html#technical-steering-committee-tsc">Technical Steering Committee (TSC)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../contribute_guidelines.html#licensing">Licensing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../contribute_guidelines.html#developer-certification-of-origin-dco">Developer Certification of Origin (DCO)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../contribute_guidelines.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../contribute_guidelines.html#repository-layout">Repository Layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../contribute_guidelines.html#submitting-issues">Submitting Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="../contribute_guidelines.html#contribution-tools-and-git-setup">Contribution Tools and Git Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../contribute_guidelines.html#coding-style">Coding Style</a></li>
<li class="toctree-l4"><a class="reference internal" href="../contribute_guidelines.html#contribution-workflow">Contribution Workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../contribute_guidelines.html#commit-guidelines">Commit Guidelines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../coding_guidelines.html">Coding Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../c_coding_guidelines.html">C Programming Language Coding Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../asm_coding_guidelines.html">Assembly Language Coding Guidelines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../doc_guidelines.html">Documentation Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#headings">Headings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#content-highlighting">Content Highlighting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#lists">Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#multi-column-lists">Multi-Column Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#tables">Tables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#file-names-and-commands">File Names and Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#branch-specific-file-links">Branch-Specific File Links</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#internal-cross-reference-linking">Internal Cross-Reference Linking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#non-ascii-characters">Non-ASCII Characters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#code-and-command-examples">Code and Command Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#images">Images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#tabs-spaces-and-indenting">Tabs, Spaces, and Indenting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#background-colors">Background Colors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#drawings">Drawings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#alternative-tabbed-content">Alternative Tabbed Content</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#instruction-steps">Instruction Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#first-instruction-step">First Instruction Step</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#second-instruction-step">Second Instruction Step</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#configuration-option-documentation">Configuration Option Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../doc_guidelines.html#documentation-generation">Documentation Generation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../graphviz.html">Drawings Using Graphviz</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../graphviz.html#simple-directed-graph">Simple Directed Graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../graphviz.html#adding-edge-labels">Adding Edge Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../graphviz.html#tables">Tables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../graphviz.html#finite-state-machine">Finite-State Machine</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../tutorials/docbuild.html">ACRN Documentation Generation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/docbuild.html#documentation-overview">Documentation Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/docbuild.html#set-up-the-documentation-working-folders">Set Up the Documentation Working Folders</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/docbuild.html#install-the-documentation-tools">Install the Documentation Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/docbuild.html#documentation-presentation-theme">Documentation Presentation Theme</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/docbuild.html#run-the-documentation-processors">Run the Documentation Processors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/docbuild.html#publish-content">Publish Content</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/docbuild.html#document-versioning">Document Versioning</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../tutorials/docbuild.html#filter-expected-warnings">Filter Expected Warnings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../contribute.html#api-documentation">API Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../api/index.html">API Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../api/hypercall_api.html">Hypercall APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../api/devicemodel_api.html">Device Model APIs</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../release_notes/index.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_2.7.html">ACRN v2.7 (Dec 2021)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.7.html#what-s-new-in-v2-7">What’s New in v2.7</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.7.html#upgrading-to-v2-7-from-previous-releases">Upgrading to v2.7 From Previous Releases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.7.html#generate-new-board-xml">Generate New Board XML</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.7.html#update-configuration-options">Update Configuration Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.7.html#document-updates">Document Updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.7.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.7.html#known-issues">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_2.6.html">ACRN v2.6 (Sep 2021)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.6.html#what-s-new-in-v2-6">What’s New in v2.6</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.6.html#upgrading-to-v2-6-from-previous-releases">Upgrading to v2.6 From Previous Releases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.6.html#generate-new-board-xml">Generate New Board XML</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.6.html#add-new-configuration-options">Add New Configuration Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.6.html#document-updates">Document Updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.6.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.6.html#known-issues">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_2.5.1.html">ACRN v2.5.1 (Aug 2021)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.5.1.html#what-s-new-in-v2-5-1">What’s New in v2.5.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.5.1.html#fixed-issues-details">Fixed Issues Details</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_2.5.html">ACRN v2.5 (Jun 2021)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.5.html#what-s-new-in-v2-5">What’s New in v2.5</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.5.html#upgrading-to-v2-5-from-previous-releases">Upgrading to v2.5 From Previous Releases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.5.html#generate-new-board-xml">Generate New Board XML</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.5.html#add-new-configuration-options">Add New Configuration Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.5.html#document-updates">Document Updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.5.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.5.html#known-issues">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_2.4.html">ACRN v2.4 (Apr 2021)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.4.html#what-s-new-in-v2-4">What’s New in v2.4</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.4.html#acrn-configuration-and-build">ACRN Configuration and Build</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.4.html#upgrading-to-v2-4-from-previous-releases">Upgrading to v2.4 From Previous Releases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.4.html#additional-dependencies">Additional Dependencies</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.4.html#configuration-file-format">Configuration File Format</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.4.html#new-configuration-options">New Configuration Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.4.html#build-commands">Build Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.4.html#patches-on-generated-sources">Patches on Generated Sources</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.4.html#document-updates">Document Updates</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.4.html#deprivileged-boot-mode-support">Deprivileged Boot Mode Support</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.4.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.4.html#known-issues">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_2.3.html">ACRN v2.3 (Dec 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.3.html#what-s-new-in-v2-3">What’s New in v2.3</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.3.html#document-updates">Document Updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.3.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.3.html#known-issues">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_2.2.html">ACRN v2.2 (Sep 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.2.html#what-s-new-in-v2-2">What’s New in v2.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.2.html#document-updates">Document Updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.2.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.2.html#known-issues">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_2.1.html">ACRN v2.1 (Aug 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.1.html#what-s-new-in-v2-1">What’s New in v2.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.1.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.1.html#known-issues">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_2.0.html">ACRN v2.0 (Jun 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#version-2-0-key-features-comparing-with-v1-0">Version 2.0 Key Features (Comparing With v1.0)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#acrn-architecture-upgrade-to-support-hybrid-mode">ACRN Architecture Upgrade to Support Hybrid Mode</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#new-hardware-platform-support">New Hardware Platform Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#pre-launched-safety-vm-support">Pre-Launched Safety VM Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#post-launched-vm-support-via-ovmf">Post-Launched VM Support via OVMF</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#post-launched-real-time-vm-support">Post-Launched Real-Time VM Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#real-time-vm-performance-optimizations">Real-Time VM Performance Optimizations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#cpu-sharing-support">CPU Sharing Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#large-selection-of-oss-for-user-vms">Large Selection of OSs for User VMs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#grub-bootloader">GRUB Bootloader</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#sr-iov-support">SR-IOV Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#graphics-passthrough-support">Graphics Passthrough Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#shared-memory-based-inter-vm-communication">Shared Memory Based Inter-Vm Communication</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#configuration-tool-support">Configuration Tool Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#kata-containers-support">Kata Containers Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#vm-orchestration">VM Orchestration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#document-updates">Document Updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_2.0.html#known-issues">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_1.6.1.html">ACRN v1.6.1 (May 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.6.1.html#version-1-6-1-major-features">Version 1.6.1 Major Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.6.1.html#what-s-new-in-v1-6-1">What’s New in v1.6.1</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.6.1.html#document-updates">Document Updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.6.1.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.6.1.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.6.1.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_1.6.html">ACRN v1.6 (Mar 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.6.html#version-1-6-major-features">Version 1.6 Major Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.6.html#what-s-new-in-v1-6">What’s New in v1.6</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.6.html#document-updates">Document Updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.6.html#new-features-details">New Features Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.6.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.6.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.6.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_1.5.html">ACRN v1.5 (Jan 2020)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.5.html#version-1-5-major-features">Version 1.5 Major Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.5.html#what-s-new-in-v1-5">What’s New in v1.5</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.5.html#document-updates">Document Updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.5.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.5.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.5.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_1.4.html">ACRN v1.4 (Oct 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.4.html#version-1-4-major-features">Version 1.4 Major Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.4.html#what-s-new-in-v1-4">What’s New in v1.4</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.4.html#document-updates">Document Updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.4.html#security-vulnerabilities">Security Vulnerabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.4.html#new-features-details">New Features Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.4.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.4.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.4.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_1.3.html">ACRN v1.3 (Sep 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.3.html#version-1-3-major-features">Version 1.3 Major Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.3.html#what-s-new-in-v1-3">What’s New in v1.3</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.3.html#document-updates">Document Updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.3.html#new-features-details">New Features Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.3.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.3.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.3.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_1.2.html">ACRN v1.2 (Aug 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.2.html#version-1-2-major-features">Version 1.2 Major Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.2.html#what-s-new-in-v1-2">What’s New in v1.2</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.2.html#document-updates">Document Updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.2.html#new-features-details">New Features Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.2.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.2.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.2.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_1.1.html">ACRN v1.1 (Jun 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.1.html#version-1-1-major-features">Version 1.1 Major Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.1.html#hybrid-mode-introduced">Hybrid Mode Introduced</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.1.html#support-for-new-guest-operating-systems">Support for New Guest Operating Systems</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.1.html#document-updates">Document Updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.1.html#new-features-details">New Features Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.1.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.1.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.1.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_1.0.2.html">ACRN v1.0.2 (Nov 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.0.2.html#change-log-in-v1-0-2-since-v1-0-1">Change Log in v1.0.2 Since v1.0.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_1.0.1.html">ACRN v1.0.1 (July 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.0.1.html#change-log-in-version-1-0-1-since-version-1-0">Change Log in Version 1.0.1 Since Version 1.0</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_1.0.html">ACRN v1.0 (May 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#version-1-0-major-features">Version 1.0 Major Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#hardware-support">Hardware Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#apl-up2-board-with-sbl-firmware">APL UP2 Board With SBL Firmware</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#enable-post-launched-rtvm-support-for-real-time-uos-in-acrn">Enable Post-Launched RTVM Support for Real-Time UOS in ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#enable-cache-qos-with-cat">Enable Cache QOS With CAT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#enable-qos-based-on-runc-container">Enable QoS Based on runC Container</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#s5-support-for-rtvm">S5 Support for RTVM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#ovmf-support-initial-patches-merged-in-acrn">OVMF Support Initial Patches Merged in ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#support-acpi-power-key-mediator">Support ACPI Power Key Mediator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#vt-x-vt-d">VT-x, VT-d</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#pic-ioapic-msi-msi-x-pci-lapic">PIC/IOAPIC/MSI/MSI-X/PCI/LAPIC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#ethernet">Ethernet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#mass-storage">Mass Storage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#usb-xdci">USB (xDCI)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#usb-mediator-xhci">USB Mediator (xHCI)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#wi-fi">Wi-Fi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#ipu-mipi-csi-2-hdmi-in">IPU (MIPI CSI-2, HDMI-In)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#bluetooth">Bluetooth</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#gvt-g-for-acrn">GVT-g for ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#gpu-preemption">GPU - Preemption</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#gpu-display-surface-sharing-via-hyper-dma">GPU - Display Surface Sharing via Hyper DMA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#virtio-standard-is-supported">Virtio Standard Is Supported</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#device-pass-through-support">Device Pass-Through Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#gpio-virtualization">GPIO Virtualization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#new-acrn-tools">New ACRN Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#document-updates">Document Updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#new-features-details">New Features Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_1.0.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_0.8.html">ACRN v0.8 (Apr 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.8.html#version-0-8-new-features">Version 0.8 New Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.8.html#gpio-virtualization">GPIO Virtualization</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.8.html#enable-qos-based-on-runc-container">Enable QoS Based on runC Container</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.8.html#s5-support-for-rtvm">S5 Support for RTVM</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.8.html#document-updates">Document Updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.8.html#new-features-details">New Features Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.8.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.8.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.8.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_0.7.html">ACRN v0.7 (Mar 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.7.html#version-0-7-new-features">Version 0.7 New Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.7.html#enable-cache-qos-with-cat">Enable Cache QOS With CAT</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.7.html#support-acpi-power-key-mediator">Support ACPI Power Key Mediator</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.7.html#document-updates">Document Updates</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.7.html#new-features-details">New Features Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.7.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.7.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.7.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_0.6.html">ACRN v0.6 (Feb 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.6.html#version-0-6-new-features">Version 0.6 New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.6.html#fixed-issues">Fixed Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.6.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.6.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_0.5.html">ACRN v0.5 (Jan 2019)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.5.html#version-0-5-new-features">Version 0.5 New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.5.html#fixed-issues">Fixed Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.5.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.5.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_0.4.html">ACRN v0.4 (Dec 2018)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.4.html#version-0-4-new-features">Version 0.4 New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.4.html#fixed-issues">Fixed Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.4.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.4.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_0.3.html">ACRN v0.3 (Nov 2018)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.3.html#version-0-3-new-features">Version 0.3 New Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.3.html#fixed-issues">Fixed Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.3.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.3.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_0.2.html">ACRN v0.2 (Sep 2018)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#version-0-2-new-features">Version 0.2 New Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#vt-x-vt-d">VT-x, VT-d</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#pic-ioapic-msi-msi-x-pci-lapic">PIC/IOAPIC/MSI/MSI-X/PCI/LAPIC</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#ethernet">Ethernet</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#storage-emmc">Storage (eMMC)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#usb-xdci">USB (xDCI)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#usb-mediator-xhci-and-drd">USB Mediator (xHCI and DRD)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#csme">CSME</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#wifi">WiFi</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#ipu-mipi-cs2-hdmi-in">IPU (MIPI-CS2, HDMI-In)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#bluetooth">Bluetooth</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#gpu-preemption">GPU  - Preemption</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#gpu-display-surface-sharing-via-hyper-dma">GPU - Display Surface Sharing via Hyper DMA</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#s3">S3</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#fixed-issues">Fixed Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.2.html#change-log">Change Log</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/release_notes_0.1.html">ACRN v0.1 (July 2018)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.1.html#version-0-1-new-features">Version 0.1 New Features</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.1.html#hardware-support">Hardware Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.1.html#gvt-g-for-acrn">GVT-g for ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.1.html#virtio-standard-is-supported">Virtio Standard Is Supported</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.1.html#device-pass-through-support">Device Pass-Through Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.1.html#hypervisor-configuration">Hypervisor Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../../release_notes/release_notes_0.1.html#new-acrn-tools">New ACRN Tools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.1.html#known-issues">Known Issues</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/release_notes_0.1.html#change-log">Change Log</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../asa.html">Security Advisory</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../asa.html#addressed-in-acrn-v2-7">Addressed in ACRN v2.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asa.html#addressed-in-acrn-v2-6">Addressed in ACRN v2.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asa.html#addressed-in-acrn-v2-5">Addressed in ACRN v2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asa.html#addressed-in-acrn-v2-3">Addressed in ACRN v2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asa.html#addressed-in-acrn-v2-1">Addressed in ACRN v2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asa.html#addressed-in-acrn-v1-6-1">Addressed in ACRN v1.6.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asa.html#addressed-in-acrn-v1-6">Addressed in ACRN v1.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../asa.html#addressed-in-acrn-v1-4">Addressed in ACRN v1.4</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../glossary.html">Glossary of Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../genindex.html">Index</a></li>
</ul>


        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Project ACRN™</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Latest -->
  
  

  <li><a href="../../index.html">Latest</a> &raquo;</li>
  
     <li><a href="../../contribute.html">Developer Reference</a> &raquo;</li>
  
     <li><a href="index.html">High-Level Design Guides</a> &raquo;</li>
  
     <li><a href="hld-hypervisor.html">Hypervisor High-Level Design</a> &raquo;</li>
  
  <li>Device Passthrough</li>

      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/developer-guides/hld/hv-dev-passthrough.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="admonition important">
        <p class="admonition-title">Important</p>
        <p>This is the latest documentation for the unstable development branch of
        Project ACRN (master).<br/>Use the drop-down menu on the left to select
        documentation for a stable release such as <a href="/2.7/">v2.7</a>.</p>
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="device-passthrough">
<span id="hv-device-passthrough"></span><h1>Device Passthrough<a class="headerlink" href="#device-passthrough" title="Permalink to this headline">¶</a></h1>
<p>A critical part of virtualization is virtualizing devices: exposing all
aspects of a device including its I/O, interrupts, DMA, and
configuration.  There are three typical device virtualization methods:
emulation, para-virtualization, and passthrough.  All emulation,
para-virtualization and passthrough are used in ACRN project. Device
emulation is discussed in <a class="reference internal" href="hv-io-emulation.html#hld-io-emulation"><span class="std std-ref">I/O Emulation High-Level Design</span></a>, para-virtualization
is discussed in <a class="reference internal" href="hld-virtio-devices.html#hld-virtio-devices"><span class="std std-ref">Virtio Devices High-Level Design</span></a> and device passthrough will be
discussed here.</p>
<div class="contents local rst-columns2 topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#passthrough-device-status" id="id8">Passthrough Device Status</a></p></li>
<li><p><a class="reference internal" href="#owner-of-passthrough-devices" id="id9">Owner of Passthrough Devices</a></p></li>
<li><p><a class="reference internal" href="#vt-d-dma-remapping" id="id10">VT-d DMA Remapping</a></p></li>
<li><p><a class="reference internal" href="#vt-d-interrupt-remapping" id="id11">VT-d Interrupt-Remapping</a></p></li>
<li><p><a class="reference internal" href="#mmio-remapping" id="id12">MMIO Remapping</a></p></li>
<li><p><a class="reference internal" href="#device-configuration-emulation" id="id13">Device Configuration Emulation</a></p></li>
<li><p><a class="reference internal" href="#msi-x-table-emulation" id="id14">MSI-X Table Emulation</a></p></li>
<li><p><a class="reference internal" href="#interrupt-remapping" id="id15">Interrupt Remapping</a></p></li>
<li><p><a class="reference internal" href="#acpi-virtualization" id="id16">ACPI Virtualization</a></p></li>
<li><p><a class="reference internal" href="#gsi-sharing-violation-check" id="id17">GSI Sharing Violation Check</a></p></li>
<li><p><a class="reference internal" href="#pcie-precision-time-measurement-ptm" id="id18">PCIe Precision Time Measurement (PTM)</a></p></li>
<li><p><a class="reference internal" href="#api-data-structures-and-interfaces" id="id19">API Data Structures and Interfaces</a></p></li>
</ul>
</div>
<hr class="docutils" />
<p>In the ACRN project, device emulation means emulating all existing
hardware resources through the Device Model, a software component running in
the Service VM. Device emulation must maintain the same SW
interface as a native device, providing transparency to the VM software
stack. Passthrough implemented in the hypervisor assigns a physical device
to a VM so the VM can access the hardware device directly with minimal
(if any) VMM involvement.</p>
<p>The difference between device emulation and passthrough is shown in
<a class="reference internal" href="#emu-passthru-diff"><span class="std std-numref">Figure 139</span></a>. You can notice device emulation has
a longer access path which causes worse performance compared with
passthrough. Passthrough can deliver near-native performance, but
can’t support device sharing.</p>
<div class="figure align-center" id="emu-passthru-diff">
<img alt="../../_images/passthru-image30.png" src="../../_images/passthru-image30.png" />
<p class="caption"><span class="caption-number">Figure 139 </span><span class="caption-text">Difference Between Emulation and Passthrough</span><a class="headerlink" href="#emu-passthru-diff" title="Permalink to this image">¶</a></p>
</div>
<p>Passthrough in the hypervisor provides the following functionalities to
allow the VM to access PCI devices directly:</p>
<ul class="simple">
<li><p>VT-d DMA remapping for PCI devices: hypervisor will set up DMA
remapping during VM initialization phase.</p></li>
<li><p>VT-d interrupt-remapping for PCI devices: hypervisor will enable
VT-d interrupt-remapping for PCI devices for security considerations.</p></li>
<li><p>MMIO remapping between virtual and physical BAR</p></li>
<li><p>Device configuration emulation</p></li>
<li><p>Remapping interrupts for PCI devices</p></li>
<li><p>ACPI configuration virtualization</p></li>
<li><p>GSI sharing violation check</p></li>
</ul>
<p>The following diagram details the passthrough initialization control flow in
ACRN for a post-launched VM:</p>
<div class="figure align-center" id="id2">
<img alt="../../_images/passthru-image22.png" src="../../_images/passthru-image22.png" />
<p class="caption"><span class="caption-number">Figure 140 </span><span class="caption-text">Passthrough Devices Initialization Control Flow</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<div class="section" id="passthrough-device-status">
<h2><a class="toc-backref" href="#id8">Passthrough Device Status</a><a class="headerlink" href="#passthrough-device-status" title="Permalink to this headline">¶</a></h2>
<p>Most common devices on supported platforms are enabled for
passthrough, as detailed here:</p>
<div class="figure align-center" id="id3">
<img alt="../../_images/passthru-image77.png" src="../../_images/passthru-image77.png" />
<p class="caption"><span class="caption-number">Figure 141 </span><span class="caption-text">Passthrough Device Status</span><a class="headerlink" href="#id3" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="owner-of-passthrough-devices">
<h2><a class="toc-backref" href="#id9">Owner of Passthrough Devices</a><a class="headerlink" href="#owner-of-passthrough-devices" title="Permalink to this headline">¶</a></h2>
<p>ACRN hypervisor will do PCI enumeration to discover the PCI devices on the
platform. According to the hypervisor/VM configurations, the owner of these PCI
devices can be one of the following 4 cases:</p>
<ul class="simple">
<li><p><strong>Hypervisor</strong>: Hypervisor uses a UART device as the console in debug version
for debugging purposes, so the UART device is owned by the hypervisor and is
not visible to any VM. For now, UART is the only PCI device that can be owned
by the hypervisor.</p></li>
<li><p><strong>Pre-launched VM</strong>: The passthrough devices that will be used in a
pre-launched VM are predefined in the VM configuration. These passthrough
devices are owned by the pre-launched VM after the VM is created. These
devices will not be removed from the pre-launched VM. There can be
pre-launched VMs in partitioned mode and hybrid mode.</p></li>
<li><p><strong>Service VM</strong>: All the passthrough devices except those described above
(owned by hypervisor or pre-launched VMs) are assigned to the Service VM. And
some of these devices can be assigned to a post-launched VM according to the
passthrough device list specified in the parameters of the ACRN Device Model.</p></li>
<li><p><strong>Post-launched VM</strong>: A list of passthrough devices can be specified in the
parameters of the ACRN Device Model. When creating a post-launched VM, these
specified devices will be moved from the Service VM domain to the
post-launched VM domain. After the post-launched VM is powered-off, these
devices will be moved back to the Service VM domain.</p></li>
</ul>
</div>
<div class="section" id="vt-d-dma-remapping">
<h2><a class="toc-backref" href="#id10">VT-d DMA Remapping</a><a class="headerlink" href="#vt-d-dma-remapping" title="Permalink to this headline">¶</a></h2>
<p>To enable passthrough, for VM DMA access the VM can only
support GPA, while a physical DMA requires HPA. One work-around
is building identity mapping so that GPA is equal to HPA, but this
is not recommended as some VMs don’t support relocation well. To
address this issue, Intel introduces VT-d in the chipset to add one
remapping engine to translate GPA to HPA for DMA operations.</p>
<p>Each VT-d engine (DMAR Unit) maintains a remapping structure
similar to a page table with device BDF (Bus/Dev/Func) as input and final
page table for GPA/HPA translation as output. The GPA/HPA translation
page table is similar to a normal multi-level page table.</p>
<p>VM DMA depends on Intel VT-d to do the translation from GPA to HPA, so we need
to enable VT-d IOMMU engine in ACRN before we can passthrough any device. The
Service VM in ACRN is a VM running in non-root mode which also depends on VT-d
to access a device. In Service VM DMA remapping engine settings, GPA is equal to
HPA.</p>
<p>ACRN hypervisor checks DMA-Remapping Hardware unit Definition (DRHD) in the host
DMAR ACPI table to get basic information, then sets up each DMAR unit. For
simplicity, ACRN reuses the EPT table as the translation table in the DMAR unit
for each passthrough device. The control flow of assigning and deassigning a
passthrough device to/from a post-launched VM is shown in the following figures:</p>
<div class="figure align-center" id="id4">
<img alt="../../_images/passthru-image86.png" src="../../_images/passthru-image86.png" />
<p class="caption"><span class="caption-number">Figure 142 </span><span class="caption-text">Ptdev Assignment Control Flow</span><a class="headerlink" href="#id4" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id5">
<img alt="../../_images/passthru-image42.png" src="../../_images/passthru-image42.png" />
<p class="caption"><span class="caption-number">Figure 143 </span><span class="caption-text">Ptdev Deassignment Control Flow</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="vt-d-interrupt-remapping">
<span id="vtd-posted-interrupt"></span><h2><a class="toc-backref" href="#id11">VT-d Interrupt-Remapping</a><a class="headerlink" href="#vt-d-interrupt-remapping" title="Permalink to this headline">¶</a></h2>
<p>The VT-d interrupt-remapping architecture enables system software to control and
censor external interrupt requests generated by all sources including those from
interrupt controllers (I/OxAPICs), MSI/MSI-X capable devices including
endpoints, root-ports and Root-Complex integrated end-points. ACRN requires
enabling the VT-d interrupt-remapping feature for security reasons. If the VT-d
hardware doesn’t support interrupt-remapping, then ACRN will refuse to boot VMs.
VT-d interrupt-remapping is NOT related to the translation from physical
interrupt to virtual interrupt or vice versa. The term VT-d interrupt-remapping
remaps the interrupt index in the VT-d interrupt-remapping table to the physical
interrupt vector after checking the external interrupt request is valid. The
hypervisor still needs to translate the physical vector to the virtual vector,
which is also described in the below section <a class="reference internal" href="#interrupt-remapping"><span class="std std-ref">Interrupt Remapping</span></a>.</p>
<p>VT-d posted interrupt (PI) enables direct delivery of external interrupts from
passthrough devices to VMs without having to exit to the hypervisor, thereby
improving interrupt performance. ACRN uses VT-d posted interrupts if the
platform supports them. VT-d distinguishes between remapped and posted interrupt
modes by bit 15 in the low 64-bit of the interrupt-remapping table entry. If
cleared, the entry is remapped. If set, it’s posted. The idea is to keep a
Posted Interrupt Descriptor (PID) in memory. The PID is a 64-byte data structure
that contains several fields:</p>
<dl class="simple">
<dt>Posted Interrupt Request (PIR):</dt><dd><p>a 256-bit field, one bit per request vector;
this is where the interrupts are posted.</p>
</dd>
<dt>Suppress Notification (SN):</dt><dd><p>determines whether to notify (<code class="docutils literal notranslate"><span class="pre">SN=0</span></code>) or not notify (<code class="docutils literal notranslate"><span class="pre">SN=1</span></code>) the CPU for
non-urgent interrupts. For ACRN, all interrupts are treated as non-urgent.
ACRN sets SN=0 during initialization and then never changes it at runtime.</p>
</dd>
<dt>Notification Vector (NV):</dt><dd><p>the CPU must be notified with an interrupt and this
field specifies the vector for notification.</p>
</dd>
<dt>Notification Destination (NDST):</dt><dd><p>the physical APIC-ID of the destination.
ACRN does not support vCPU migration. One vCPU always runs on the same pCPU,
so for ACRN, NDST is never changed after initialization.</p>
</dd>
<dt>Outstanding Notification (ON):</dt><dd><p>indicates if a notification event is outstanding</p>
</dd>
</dl>
<p>The ACRN scheduler supports vCPU scheduling, where two or more vCPUs can
share the same pCPU using a time sharing technique. One issue emerges
here for the VT-d posted interrupt handling process, where IRQs could happen
when the target vCPU is in a halted state. We need to handle the case
where the running vCPU disrupted by the external interrupt, is not the
target vCPU that should have received the external interrupt.</p>
<p>Consider this scenario:</p>
<ul class="simple">
<li><p>vCPU0 runs on pCPU0 and then enters a halted state,</p></li>
<li><p>ACRN scheduler now chooses vCPU1 to run on pCPU0.</p></li>
</ul>
<p>If an external interrupt from an assigned device destined to vCPU0
happens at this time, we do not want this interrupt to be incorrectly
consumed by vCPU1 running on pCPU0. This would happen if we
allocate the same Activation Notification Vector (ANV) to all vCPUs.</p>
<p>To circumvent this issue, ACRN allocates unique ANVs for each vCPU that
belongs to the same pCPU. The ANVs need only be unique within each pCPU,
not across all vCPUs. Since vCPU0’s ANV is different from vCPU1’s ANV,
if vCPU0 is in a halted state, external interrupts from an assigned
device destined to vCPU0 delivered through the PID will not trigger the
posted interrupt processing. Instead, a VMExit to ACRN happens that can
then process the event such as waking up the halted vCPU0 and kick it
to run on pCPU0.</p>
<p>For ACRN, <code class="docutils literal notranslate"><span class="pre">CONFIG_MAX_VM_NUM</span></code> vCPUs may be running on top of a pCPU. ACRN
does not support two vCPUs of the same VM running on top of the same
pCPU. This reduces the number of pre-allocated ANVs for posted
interrupts to <code class="docutils literal notranslate"><span class="pre">CONFIG_MAX_VM_NUM</span></code>, and enables ACRN to avoid switching
between active and wake-up vector values in the posted interrupt
descriptor on vCPU scheduling state changes. ACRN uses the following
formula to assign posted interrupt vectors to vCPUs:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">NV</span> <span class="o">=</span> <span class="n">POSTED_INTR_VECTOR</span> <span class="o">+</span> <span class="n">vcpu</span><span class="o">-&gt;</span><span class="n">vm</span><span class="o">-&gt;</span><span class="n">vm_id</span>
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">POSTED_INTR_VECTOR</span></code> is the starting vector (0xe3) for posted interrupts.</p>
<p>ACRN maintains a per-PCPU vCPU array that stores the pointers to
assigned vCPUs for each pCPU and is indexed by <code class="docutils literal notranslate"><span class="pre">vcpu-&gt;vm-&gt;vm_id</span></code>.
When the vCPU is created, ACRN adds the vCPU to the containing pCPU’s
vCPU array. When the vCPU is offline, ACRN removes the vCPU from the
related vCPU array.</p>
<p>An example to illustrate our solution:</p>
<div class="figure align-center">
<img alt="../../_images/passthru-image50.png" src="../../_images/passthru-image50.png" />
</div>
<p>ACRN sets <code class="docutils literal notranslate"><span class="pre">SN=0</span></code> during initialization and then never changes it at
runtime. This means posted interrupt notification is never suppressed.
After posting the interrupt in Posted Interrupt Request (PIR), VT-d will
always notify the CPU using the interrupt vector NV, in both root and
non-root mode. With this scheme, if the target vCPU is running under
VMX non-root mode, it will receive the interrupts coming from the
passthrough device without a VMExit (and therefore without any
intervention of the ACRN hypervisor).</p>
<p>If the target vCPU is in a halted state (under VMX non-root mode), a
scheduling request will be raised to wake it up. This is needed to
achieve real time behavior. If an RT-VM is waiting for an event, when
the event is fired (a PI interrupt fires), we need to wake up the VM
immediately.</p>
</div>
<div class="section" id="mmio-remapping">
<h2><a class="toc-backref" href="#id12">MMIO Remapping</a><a class="headerlink" href="#mmio-remapping" title="Permalink to this headline">¶</a></h2>
<p>For PCI MMIO BAR, the hypervisor builds EPT mapping between the virtual BAR and
physical BAR, then the VM can access MMIO directly. There is one exception: an
MSI-X table is also in a MMIO BAR. The hypervisor needs to trap the accesses to
the MSI-X table. So the pages that have an MSI-X table should not be accessed by
the VM directly. EPT mapping is not built for pages that have an MSI-X table.</p>
</div>
<div class="section" id="device-configuration-emulation">
<h2><a class="toc-backref" href="#id13">Device Configuration Emulation</a><a class="headerlink" href="#device-configuration-emulation" title="Permalink to this headline">¶</a></h2>
<p>The PCI configuration space can be accessed by a PCI-compatible
Configuration Mechanism (IO port 0xCF8/CFC) and the PCI Express Enhanced
Configuration Access Mechanism (PCI MMCONFIG). The ACRN hypervisor traps
this PCI configuration space access and emulates it. Refer to <a class="reference internal" href="split-dm.html#split-device-model"><span class="std std-ref">Split Device Model</span></a> for details.</p>
</div>
<div class="section" id="msi-x-table-emulation">
<h2><a class="toc-backref" href="#id14">MSI-X Table Emulation</a><a class="headerlink" href="#msi-x-table-emulation" title="Permalink to this headline">¶</a></h2>
<p>VM accesses to an MSI-X table should be trapped so that the hypervisor has the
information to map the virtual vector and physical vector. EPT mapping should
be skipped for the 4KB pages that have an MSI-X table.</p>
<p>There are three situations for the emulation of MSI-X tables:</p>
<ul class="simple">
<li><p><strong>Service VM</strong>: Accesses to an MSI-X table are handled by the hypervisor MMIO
handler (4KB adjusted up and down). The hypervisor remaps the interrupts.</p></li>
<li><p><strong>Post-launched VM</strong>: Accesses to an MSI-X table are handled by the Device
Model MMIO handler (4KB adjusted up and down). When the Device Model (Service
VM) writes to the table, it will be intercepted by the hypervisor MMIO
handler. The hypervisor remaps the interrupts.</p></li>
<li><p><strong>Pre-launched VM</strong>: Writes to the MMIO region in an MSI-X table BAR are
handled by the hypervisor MMIO handler. If the offset falls within the MSI-X
table (offset, offset+tables_size), the hypervisor remaps the interrupts.</p></li>
</ul>
</div>
<div class="section" id="interrupt-remapping">
<span id="id1"></span><h2><a class="toc-backref" href="#id15">Interrupt Remapping</a><a class="headerlink" href="#interrupt-remapping" title="Permalink to this headline">¶</a></h2>
<p>When the physical interrupt of a passthrough device happens, the hypervisor has
to distribute it to the relevant VM according to interrupt remapping
relationships. The structure <code class="docutils literal notranslate"><span class="pre">ptirq_remapping_info</span></code> is used to define
the subordination relation between physical interrupt and VM, the
virtual destination, etc. See the following figure for details:</p>
<div class="figure align-center" id="id6">
<img alt="../../_images/passthru-image91.png" src="../../_images/passthru-image91.png" />
<p class="caption"><span class="caption-number">Figure 144 </span><span class="caption-text">Remapping of Physical Interrupts</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p>There are two different types of interrupt sources: IOAPIC and MSI.
The hypervisor will record different information for interrupt
distribution: physical and virtual IOAPIC pin for IOAPIC source,
physical and virtual BDF and other information for MSI source.</p>
<p>Service VM passthrough is also in the scope of interrupt remapping which is
done on-demand rather than on hypervisor initialization.</p>
<div class="figure align-center" id="init-remapping">
<img alt="../../_images/passthru-image102.png" src="../../_images/passthru-image102.png" />
<p class="caption"><span class="caption-number">Figure 145 </span><span class="caption-text">Initialization of Remapping of Virtual IOAPIC Interrupts for Service VM</span><a class="headerlink" href="#init-remapping" title="Permalink to this image">¶</a></p>
</div>
<p><a class="reference internal" href="#init-remapping"><span class="std std-numref">Figure 145</span></a> above illustrates how remapping of (virtual) IOAPIC
interrupts are remapped for the Service VM. VM exit occurs whenever the Service
VM tries to unmask an interrupt in (virtual) IOAPIC by writing to the
Redirection Table Entry (or RTE). The hypervisor then invokes the IOAPIC
emulation handler (refer to <a class="reference internal" href="hv-io-emulation.html#hld-io-emulation"><span class="std std-ref">I/O Emulation High-Level Design</span></a> for details on I/O
emulation) which calls APIs to set up a remapping for the to-be-unmasked
interrupt.</p>
<p>Remapping of (virtual) MSI interrupts are set up in a similar sequence:</p>
<div class="figure align-center" id="id7">
<img alt="../../_images/passthru-image98.png" src="../../_images/passthru-image98.png" />
<p class="caption"><span class="caption-number">Figure 146 </span><span class="caption-text">Initialization of Remapping of Virtual MSI for Service VM</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<p>This figure illustrates how mappings of MSI or MSI-X are set up for the
Service VM. The Service VM is responsible for issuing a hypercall to notify the
hypervisor before it configures the PCI configuration space to enable an
MSI. The hypervisor takes this opportunity to set up a remapping for the
given MSI or MSI-X before it is actually enabled by the Service VM.</p>
<p>When the User VM needs to access the physical device by passthrough, it uses
the following steps:</p>
<ul class="simple">
<li><p>User VM gets a virtual interrupt.</p></li>
<li><p>VM exit happens and the trapped vCPU is the target where the interrupt
will be injected.</p></li>
<li><p>Hypervisor handles the interrupt and translates the vector
according to <code class="docutils literal notranslate"><span class="pre">ptirq_remapping_info</span></code>.</p></li>
<li><p>Hypervisor delivers the interrupt to the User VM.</p></li>
</ul>
<p>When the Service VM needs to use the physical device, the passthrough is also
active because the Service VM is the first VM. The detail steps are:</p>
<ul class="simple">
<li><p>Service VM gets all physical interrupts. It assigns different interrupts for
different VMs during initialization and reassigns when a VM is created or
deleted.</p></li>
<li><p>When a physical interrupt is trapped, an exception will happen after VMCS
has been set.</p></li>
<li><p>Hypervisor handles the VM exit issue according to
<code class="docutils literal notranslate"><span class="pre">ptirq_remapping_info</span></code> and translates the vector.</p></li>
<li><p>The interrupt is injected the same as a virtual interrupt.</p></li>
</ul>
</div>
<div class="section" id="acpi-virtualization">
<h2><a class="toc-backref" href="#id16">ACPI Virtualization</a><a class="headerlink" href="#acpi-virtualization" title="Permalink to this headline">¶</a></h2>
<p>ACPI virtualization is designed in ACRN with these assumptions:</p>
<ul class="simple">
<li><p>Hypervisor has no knowledge of ACPI,</p></li>
<li><p>Service VM owns all physical ACPI resources,</p></li>
<li><p>User VM sees virtual ACPI resources emulated by the Device Model.</p></li>
</ul>
<p>Some passthrough devices require a physical ACPI table entry for initialization.
The Device Model creates such device entry based on the physical one according
to vendor ID and device ID. Virtualization is implemented in the Service VM
Device Model and not in the scope of the hypervisor. For pre-launched VMs, the
ACRN hypervisor doesn’t support ACPI virtualization, so devices relying on ACPI
tables are not supported.</p>
</div>
<div class="section" id="gsi-sharing-violation-check">
<h2><a class="toc-backref" href="#id17">GSI Sharing Violation Check</a><a class="headerlink" href="#gsi-sharing-violation-check" title="Permalink to this headline">¶</a></h2>
<p>All the PCI devices that share the same GSI should be assigned to the same
VM to avoid physical GSI sharing between multiple VMs. In partitioned mode or
hybrid mode, the PCI devices assigned to a pre-launched VM are statically
predefined. Developers should take care not to violate the rule. For a
post-launched VM, the ACRN Device Model puts the devices sharing the same GSI
pin in a GSI sharing group (devices that don’t support MSI). The devices in the
same group should be assigned together to the current VM; otherwise, none of
them should be assigned to the current VM. A device that violates the rule will
be rejected to be passed-through. The checking logic is implemented in the
Device Model and not in the scope of the hypervisor. The platform-specific GSI
information shall be filled in <code class="docutils literal notranslate"><span class="pre">devicemodel/hw/pci/platform_gsi_info.c</span></code> for
the target platform to activate the checking of GSI sharing violations.</p>
</div>
<div class="section" id="pcie-precision-time-measurement-ptm">
<span id="pcie-ptm-implementation"></span><h2><a class="toc-backref" href="#id18">PCIe Precision Time Measurement (PTM)</a><a class="headerlink" href="#pcie-precision-time-measurement-ptm" title="Permalink to this headline">¶</a></h2>
<p>The PCI Express (PCIe) specification defines a Precision Time Measurement (PTM)
mechanism that enables time coordination and synchronization of events across
multiple PCI components with independent local time clocks within the same
system.  Intel supports PTM on several of its systems and devices, such as PTM
root capabilities support on Whiskey Lake and Tiger Lake PCIe root ports, and
PTM device support on an Intel I225-V/I225-LM family Ethernet controller.  For
further details on PTM, refer to the <a class="reference external" href="https://pcisig.com/specifications">PCIe specification</a>.</p>
<p>ACRN adds PCIe root port emulation in the hypervisor to support the PTM feature
and emulates a simple PTM hierarchy.  ACRN enables PTM in a post-launched VM if
the user sets the <code class="docutils literal notranslate"><span class="pre">enable_ptm</span></code> option when passing through a device to the
post-launched VM.  When you enable PTM, the passthrough device is connected to a
virtual root port instead of the host bridge.</p>
<p>By default, the <a class="reference internal" href="../../reference/config-options.html#vm-ptm"><span class="std std-ref">vm.PTM</span></a> option is disabled in ACRN VMs. Use the
<a class="reference internal" href="../../tutorials/acrn_configurator_tool.html#acrn-configurator-tool"><span class="std std-ref">ACRN Configurator Tool</span></a> to enable PTM
in the scenario XML file that configures the VM.</p>
<p>Here is an example launch script that configures a supported Ethernet card for
passthrough and enables PTM on it:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">declare</span> -A passthru_vpid
<span class="nb">declare</span> -A passthru_bdf
<span class="nv">passthru_vpid</span><span class="o">=(</span>
 <span class="o">[</span><span class="s2">&quot;ethptm&quot;</span><span class="o">]=</span><span class="s2">&quot;8086 15f2&quot;</span>
 <span class="o">)</span>
<span class="nv">passthru_bdf</span><span class="o">=(</span>
 <span class="o">[</span><span class="s2">&quot;ethptm&quot;</span><span class="o">]=</span><span class="s2">&quot;0000:aa:00.0&quot;</span>
 <span class="o">)</span>
<span class="hll"><span class="nb">echo</span> <span class="si">${</span><span class="nv">passthru_vpid</span><span class="p">[</span><span class="s2">&quot;ethptm&quot;</span><span class="p">]</span><span class="si">}</span> &gt; /sys/bus/pci/drivers/pci-stub/new_id
</span><span class="hll"><span class="nb">echo</span> <span class="si">${</span><span class="nv">passthru_bdf</span><span class="p">[</span><span class="s2">&quot;ethptm&quot;</span><span class="p">]</span><span class="si">}</span> &gt; /sys/bus/pci/devices/<span class="si">${</span><span class="nv">passthru_bdf</span><span class="p">[</span><span class="s2">&quot;ethptm&quot;</span><span class="p">]</span><span class="si">}</span>/driver/unbind
</span><span class="hll"><span class="nb">echo</span> <span class="si">${</span><span class="nv">passthru_bdf</span><span class="p">[</span><span class="s2">&quot;ethptm&quot;</span><span class="p">]</span><span class="si">}</span> &gt; /sys/bus/pci/drivers/pci-stub/bind
</span>
acrn-dm -m <span class="nv">$mem_size</span> -s <span class="m">0</span>:0,hostbridge <span class="se">\</span>
   -s <span class="m">3</span>,virtio-blk,user-vm-test.img <span class="se">\</span>
   -s <span class="m">4</span>,virtio-net,tap<span class="o">=</span>tap0 <span class="se">\</span>
   -s <span class="m">5</span>,virtio-console,@stdio:stdio_port <span class="se">\</span>
<span class="hll">   -s <span class="m">6</span>,passthru,a9/00/0,enable_ptm <span class="se">\</span>
</span>   --ovmf /usr/share/acrn/bios/OVMF.fd
</pre></div>
</div>
<p>And here is the bus hierarchy from the User VM (as shown by the <code class="docutils literal notranslate"><span class="pre">lspci</span></code> command):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">lspci</span> <span class="o">-</span><span class="n">tv</span>
<span class="o">-</span><span class="p">[</span><span class="mi">0000</span><span class="p">:</span><span class="mi">00</span><span class="p">]</span><span class="o">-+-</span><span class="mf">00.0</span>  <span class="n">Network</span> <span class="n">Appliance</span> <span class="n">Corporation</span> <span class="n">Device</span> <span class="mi">1275</span>
           <span class="o">+-</span><span class="mf">03.0</span>  <span class="n">Red</span> <span class="n">Hat</span><span class="p">,</span> <span class="n">Inc</span><span class="o">.</span> <span class="n">Virtio</span> <span class="n">block</span> <span class="n">device</span>
           <span class="o">+-</span><span class="mf">04.0</span>  <span class="n">Red</span> <span class="n">Hat</span><span class="p">,</span> <span class="n">Inc</span><span class="o">.</span> <span class="n">Virtio</span> <span class="n">network</span> <span class="n">device</span>
           <span class="o">+-</span><span class="mf">05.0</span>  <span class="n">Red</span> <span class="n">Hat</span><span class="p">,</span> <span class="n">Inc</span><span class="o">.</span> <span class="n">Virtio</span> <span class="n">console</span>
           \<span class="o">-</span><span class="mf">06.0</span><span class="o">-</span><span class="p">[</span><span class="mi">01</span><span class="p">]</span><span class="o">----</span><span class="mf">00.0</span>  <span class="n">Intel</span> <span class="n">Corporation</span> <span class="n">Device</span> <span class="mi">15</span><span class="n">f2</span>
</pre></div>
</div>
<div class="section" id="ptm-implementation-notes">
<h3>PTM Implementation Notes<a class="headerlink" href="#ptm-implementation-notes" title="Permalink to this headline">¶</a></h3>
<p>To simplify PTM support implementation, the virtual root port only supports the
most basic PCIe configuration and operation, in addition to PTM capabilities.</p>
<p>For a post-launched VM, you enable PTM by setting the
<code class="docutils literal notranslate"><span class="pre">enable_ptm</span></code> option for the passthrough device (as shown above).</p>
<div class="figure align-center" id="ptm-flow">
<a class="reference internal image-reference" href="../../_images/PTM-hld-PTM-flow.png"><img alt="../../_images/PTM-hld-PTM-flow.png" src="../../_images/PTM-hld-PTM-flow.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Figure 147 </span><span class="caption-text">PTM-enabling Workflow in Post-launched VM</span><a class="headerlink" href="#ptm-flow" title="Permalink to this image">¶</a></p>
</div>
<p>As shown in <a class="reference internal" href="#ptm-flow"><span class="std std-numref">Figure 147</span></a>, PTM is enabled in the root port during the
hypervisor startup. The Device Model (DM) then checks whether the passthrough
device supports PTM requestor capabilities and whether the corresponding root
port supports PTM root capabilities, as well as some other sanity checks.  If an
error is detected during these checks, the error will be reported and ACRN will
not enable PTM in the post-launched VM. This doesn’t prevent the user from
launching the post-launched VM and passing through the device to the VM.  If no
error is detected, the Device Model uses the <code class="docutils literal notranslate"><span class="pre">add_vdev</span></code> hypercall to add a
virtual root port (VRP), acting as the PTM root, to the post-launched VM before
passing through the device to the post-launched VM.</p>
<div class="figure align-center" id="ptm-vrp">
<a class="reference internal image-reference" href="../../_images/PTM-hld-PTM-passthru.png"><img alt="../../_images/PTM-hld-PTM-passthru.png" src="../../_images/PTM-hld-PTM-passthru.png" style="width: 700px;" /></a>
<p class="caption"><span class="caption-number">Figure 148 </span><span class="caption-text">PTM-enabled PCI Device Passthrough to Post-launched VM</span><a class="headerlink" href="#ptm-vrp" title="Permalink to this image">¶</a></p>
</div>
<p><a class="reference internal" href="#ptm-vrp"><span class="std std-numref">Figure 148</span></a> shows that, after enabling PTM, the passthrough device
connects to the virtual root port instead of the virtual host bridge.</p>
<p>To use PTM in a virtualized environment, you may want to first verify that PTM
is supported by the device and is enabled on the bare metal machine.
If supported, follow these steps to enable PTM in the post-launched VM:</p>
<ol class="arabic">
<li><p>Make sure that PTM is enabled in the guest kernel.  In the Linux kernel,
for example, set <code class="docutils literal notranslate"><span class="pre">CONFIG_PCIE_PTM=y</span></code>.</p></li>
<li><p>Not every PCI device supports PTM.  One example that does is the Intel I225-V
Ethernet controller.  If you passthrough this card to the post-launched VM,
make sure the post-launched VM uses a version of the IGC driver that supports
PTM.</p></li>
<li><p>In the Device Model launch script, add the <code class="docutils literal notranslate"><span class="pre">enable_ptm</span></code> option to the
passthrough device.  For example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ acrn-dm -m <span class="nv">$mem_size</span> -s <span class="m">0</span>:0,hostbridge <span class="se">\</span>
    -s <span class="m">3</span>,virtio-blk,user-vm-test.img <span class="se">\</span>
    -s <span class="m">4</span>,virtio-net,tap<span class="o">=</span>tap0 <span class="se">\</span>
    -s <span class="m">5</span>,virtio-console,@stdio:stdio_port <span class="se">\</span>
<span class="hll">    -s <span class="m">6</span>,passthru,a9/00/0,enable_ptm <span class="se">\</span>
</span>    --ovmf /usr/share/acrn/bios/OVMF.fd <span class="se">\</span>
</pre></div>
</div>
</li>
<li><p>You can check that PTM is correctly enabled on the post-launched VM by
displaying the PCI bus hierarchy on the post-launched VM using the <code class="docutils literal notranslate"><span class="pre">lspci</span></code>
command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>lspci -tv
  -<span class="o">[</span><span class="m">0000</span>:00<span class="o">]</span>-+-00.0  Network Appliance Corporation Device <span class="m">1275</span>
   +-03.0  Red Hat, Inc. Virtio block device
   +-04.0  Red Hat, Inc. Virtio network device
   +-05.0  Red Hat, Inc. Virtio console
   <span class="se">\-</span><span class="m">06</span>.0-<span class="o">[</span><span class="m">01</span><span class="o">]</span>----00.0  Intel Corporation Device 15f2

sudo lspci -vv <span class="c1"># (Only relevant output is shown)</span>
  <span class="m">00</span>:00.0 Host bridge: Network Appliance Corporation Device <span class="m">1275</span>
  <span class="m">00</span>:06.0 PCI bridge: Intel Corporation Sunrise Point-LP PCI Express Root Port <span class="c1">#5 (rev 02) (prog-if 00 [Normal decode])</span>
  . . .
<span class="hll">          Capabilities: <span class="o">[</span><span class="m">100</span> v1<span class="o">]</span> Precision Time Measurement
</span>                  PTMCap: Requester:- Responder:+ Root:+
                  PTMClockGranularity: 4ns
                  PTMControl: Enabled:+ RootSelected:+
                  PTMEffectiveGranularity: 4ns
          Kernel driver <span class="k">in</span> use: pcieport
  <span class="m">01</span>:00.0 Ethernet controller: Intel Corporation Device 15f2 <span class="o">(</span>rev <span class="m">01</span><span class="o">)</span>
  . . .
<span class="hll">          Capabilities: <span class="o">[</span>1f0 v1<span class="o">]</span> Precision Time Measurement
</span>                  PTMCap: Requester:+ Responder:- Root:-
                  PTMClockGranularity: 4ns
                  PTMControl: Enabled:+ RootSelected:-
                  PTMEffectiveGranularity: 4ns
          Kernel driver <span class="k">in</span> use: igc
</pre></div>
</div>
</li>
</ol>
</div>
</div>
<div class="section" id="api-data-structures-and-interfaces">
<h2><a class="toc-backref" href="#id19">API Data Structures and Interfaces</a><a class="headerlink" href="#api-data-structures-and-interfaces" title="Permalink to this headline">¶</a></h2>
<p>The following are common APIs provided to initialize interrupt remapping for
VMs:</p>
<dl class="c function">
<dt id="c.ptirq_intx_pin_remap">
<span class="target" id="group__acrn__passthrough_ga73c49100a892a4a7ee0e61feafaa2e6f_1ga73c49100a892a4a7ee0e61feafaa2e6f"></span><span class="pre">int32_t</span> <code class="sig-name descname"><span class="pre">ptirq_intx_pin_remap</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">struct</span></em> <span class="pre">acrn_vm</span> <span class="pre">*</span><em><span class="pre">vm</span></em>, <span class="pre">uint32_t</span> <em><span class="pre">virt_gsi</span></em>, <em class="property"><span class="pre">enum</span></em> <span class="pre">intx_ctlr</span> <em><span class="pre">vgsi_ctlr</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.ptirq_intx_pin_remap" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>INTx remapping for passthrough device. </p>
<p>Set up the remapping of the given virtual pin for the given vm. This is the main entry for PCI/Legacy device assignment with INTx, calling from vIOAPIC or vPIC.</p>
<p><dl class="simple">
<dt><strong>Preconditions</strong></dt><dd><p>vm != NULL </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> – <strong>[in]</strong> pointer to acrn_vm </p></li>
<li><p><strong>virt_gsi</strong> – <strong>[in]</strong> virtual GSI number associated with the passthrough device </p></li>
<li><p><strong>vgsi_ctlr</strong> – <strong>[in]</strong> INTX_CTLR_IOAPIC or INTX_CTLR_PIC</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>0: on success</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-ENODEV:</span></code> <ul>
<li><p>for Service VM, the entry already be held by others</p></li>
<li><p>for User VM, no pre-hold mapping found.</p></li>
</ul>
</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt id="c.ptirq_prepare_msix_remap">
<span class="target" id="group__acrn__passthrough_gaf08b6e402e371fe2dda7e10d901d41b1_1gaf08b6e402e371fe2dda7e10d901d41b1"></span><span class="pre">int32_t</span> <code class="sig-name descname"><span class="pre">ptirq_prepare_msix_remap</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">struct</span></em> <span class="pre">acrn_vm</span> <span class="pre">*</span><em><span class="pre">vm</span></em>, <span class="pre">uint16_t</span> <em><span class="pre">virt_bdf</span></em>, <span class="pre">uint16_t</span> <em><span class="pre">phys_bdf</span></em>, <span class="pre">uint16_t</span> <em><span class="pre">entry_nr</span></em>, <em class="property"><span class="pre">struct</span></em> <span class="pre">msi_info</span> <span class="pre">*</span><em><span class="pre">info</span></em>, <span class="pre">uint16_t</span> <em><span class="pre">irte_idx</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.ptirq_prepare_msix_remap" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>MSI/MSI-x remapping for passthrough device. </p>
<p>Main entry for PCI device assignment with MSI and MSI-X. MSI can up to 8 vectors and MSI-X can up to 1024 Vectors.</p>
<p><dl class="simple">
<dt><strong>Preconditions</strong></dt><dd><p>vm != NULL </p>
</dd>
<dt><strong>Preconditions</strong></dt><dd><p>info != NULL </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> – <strong>[in]</strong> pointer to acrn_vm </p></li>
<li><p><strong>virt_bdf</strong> – <strong>[in]</strong> virtual bdf associated with the passthrough device </p></li>
<li><p><strong>phys_bdf</strong> – <strong>[in]</strong> virtual bdf associated with the passthrough device </p></li>
<li><p><strong>entry_nr</strong> – <strong>[in]</strong> indicate coming vectors, entry_nr = 0 means first vector </p></li>
<li><p><strong>info</strong> – <strong>[in]</strong> structure used for MSI/MSI-x remapping </p></li>
<li><p><strong>irte_idx</strong> – <strong>[in]</strong> caller can pass a valid IRTE index, otherwise, use INVALID_IRTE_ID</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>0: on success</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-ENODEV:</span></code> <ul>
<li><p>for Service VM, the entry already be held by others</p></li>
<li><p>for User VM, no pre-hold mapping found.</p></li>
</ul>
</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<p>Post-launched VMs need to pre-allocate interrupt entries during VM
initialization. Post-launched VMs need to free interrupt entries during VM
de-initialization. The following APIs are provided to pre-allocate/free
interrupt entries for post-launched VMs:</p>
<dl class="c function">
<dt id="c.ptirq_add_intx_remapping">
<span class="target" id="group__acrn__passthrough_ga0095f3f4399e3409aa087b49b4625052_1ga0095f3f4399e3409aa087b49b4625052"></span><span class="pre">int32_t</span> <code class="sig-name descname"><span class="pre">ptirq_add_intx_remapping</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">struct</span></em> <span class="pre">acrn_vm</span> <span class="pre">*</span><em><span class="pre">vm</span></em>, <span class="pre">uint32_t</span> <em><span class="pre">virt_gsi</span></em>, <span class="pre">uint32_t</span> <em><span class="pre">phys_gsi</span></em>, <span class="pre">bool</span> <em><span class="pre">pic_pin</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.ptirq_add_intx_remapping" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Add an interrupt remapping entry for INTx as pre-hold mapping. </p>
<p>Except Service VM, Device Model should call this function to pre-hold ptdev intx The entry is identified by phys_pin, one entry vs. one phys_pin. Currently, one phys_pin can only be held by one pin source (vPIC or vIOAPIC).</p>
<p><dl class="simple">
<dt><strong>Preconditions</strong></dt><dd><p>vm != NULL </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> – <strong>[in]</strong> pointer to acrn_vm </p></li>
<li><p><strong>virt_gsi</strong> – <strong>[in]</strong> virtual pin number associated with the passthrough device </p></li>
<li><p><strong>phys_gsi</strong> – <strong>[in]</strong> physical pin number associated with the passthrough device </p></li>
<li><p><strong>pic_pin</strong> – <strong>[in]</strong> true for pic, false for ioapic</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p>0: on success</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-EINVAL:</span></code> invalid virt_pin value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-ENODEV:</span></code> failed to add the remapping entry</p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt id="c.ptirq_remove_intx_remapping">
<span class="target" id="group__acrn__passthrough_ga62bc1681944903b329ffbe2d4f28dab6_1ga62bc1681944903b329ffbe2d4f28dab6"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">ptirq_remove_intx_remapping</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <em class="property"><span class="pre">struct</span></em> <span class="pre">acrn_vm</span> <span class="pre">*</span><em><span class="pre">vm</span></em>, <span class="pre">uint32_t</span> <em><span class="pre">virt_gsi</span></em>, <span class="pre">bool</span> <em><span class="pre">pic_pin</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.ptirq_remove_intx_remapping" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Remove an interrupt remapping entry for INTx. </p>
<p>Deactivate &amp; remove mapping entry of the given virt_pin for given vm.</p>
<p><dl class="simple">
<dt><strong>Preconditions</strong></dt><dd><p>vm != NULL </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> – <strong>[in]</strong> pointer to acrn_vm </p></li>
<li><p><strong>virt_gsi</strong> – <strong>[in]</strong> virtual pin number associated with the passthrough device </p></li>
<li><p><strong>pic_pin</strong> – <strong>[in]</strong> true for pic, false for ioapic</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt id="c.ptirq_remove_msix_remapping">
<span class="target" id="group__acrn__passthrough_gaaed5116dffd86bf1298da9b77cc8cd4d_1gaaed5116dffd86bf1298da9b77cc8cd4d"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">ptirq_remove_msix_remapping</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <em class="property"><span class="pre">struct</span></em> <span class="pre">acrn_vm</span> <span class="pre">*</span><em><span class="pre">vm</span></em>, <span class="pre">uint16_t</span> <em><span class="pre">phys_bdf</span></em>, <span class="pre">uint32_t</span> <em><span class="pre">vector_count</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.ptirq_remove_msix_remapping" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Remove interrupt remapping entry/entries for MSI/MSI-x. </p>
<p>Remove the mapping of given number of vectors of the given virtual BDF for the given vm.</p>
<p><dl class="simple">
<dt><strong>Preconditions</strong></dt><dd><p>vm != NULL </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> – <strong>[in]</strong> pointer to acrn_vm </p></li>
<li><p><strong>phys_bdf</strong> – <strong>[in]</strong> physical bdf associated with the passthrough device </p></li>
<li><p><strong>vector_count</strong> – <strong>[in]</strong> number of vectors</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<p>The following APIs are provided to acknowledge a virtual interrupt:</p>
<dl class="c function">
<dt id="c.ptirq_intx_ack">
<span class="target" id="group__acrn__passthrough_gae456b1c1e9b19d920f15c7392e93dbd6_1gae456b1c1e9b19d920f15c7392e93dbd6"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">ptirq_intx_ack</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">struct</span></em> <span class="pre">acrn_vm</span> <span class="pre">*</span><em><span class="pre">vm</span></em>, <span class="pre">uint32_t</span> <em><span class="pre">virt_gsi</span></em>, <em class="property"><span class="pre">enum</span></em> <span class="pre">intx_ctlr</span> <em><span class="pre">vgsi_ctlr</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.ptirq_intx_ack" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Acknowledge a virtual interrupt for passthrough device. </p>
<p>Acknowledge a virtual legacy interrupt for a passthrough device.</p>
<p><dl class="simple">
<dt><strong>Preconditions</strong></dt><dd><p>vm != NULL </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> – <strong>[in]</strong> pointer to acrn_vm </p></li>
<li><p><strong>virt_gsi</strong> – <strong>[in]</strong> virtual GSI number associated with the passthrough device </p></li>
<li><p><strong>vgsi_ctlr</strong> – <strong>[in]</strong> INTX_CTLR_IOAPIC or INTX_CTLR_PIC</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<p>The following APIs are provided to handle a ptdev interrupt:</p>
<dl class="c function">
<dt id="c.ptdev_init">
<span class="target" id="group__acrn__passthrough_ga17303a9f08f5090e75d4fbafb2ced67a_1ga17303a9f08f5090e75d4fbafb2ced67a"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">ptdev_init</span></code><span class="sig-paren">(</span><span class="pre">void</span><span class="sig-paren">)</span><a class="headerlink" href="#c.ptdev_init" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Passthrough device global data structure initialization. </p>
<p>During the hypervisor cpu initialization stage, this function:<ul class="simple">
<li><p>init global spinlock for ptdev (on BSP)</p></li>
<li><p>register SOFTIRQ_PTDEV handler (on BSP)</p></li>
<li><p>init the softirq entry list for each CPU </p></li>
</ul>
</p>
</dd></dl>

<dl class="c function">
<dt id="c.ptirq_softirq">
<span class="target" id="group__acrn__passthrough_gaefcabcb82488fce2a18f6b5ab9dacd2c_1gaefcabcb82488fce2a18f6b5ab9dacd2c"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">ptirq_softirq</span></code><span class="sig-paren">(</span><span class="pre">uint16_t</span> <em><span class="pre">pcpu_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.ptirq_softirq" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Handler of softirq for passthrough device. </p>
<p>When hypervisor receive a physical interrupt from passthrough device, it will enqueue a ptirq entry and raise softirq SOFTIRQ_PTDEV. This function is the handler of the softirq, it handles the interrupt and injects the virtual into VM. The handler is registered by calling <a class="reference internal" href="#group__acrn__passthrough_ga17303a9f08f5090e75d4fbafb2ced67a_1ga17303a9f08f5090e75d4fbafb2ced67a"><span class="std std-ref">ptdev_init</span></a> during hypervisor initialization.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pcpu_id</strong> – <strong>[in]</strong> physical cpu id of the soft irq </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt id="c.ptirq_alloc_entry">
<span class="target" id="group__acrn__passthrough_ga4aa69d188bfee801e4f26f1611bc7b54_1ga4aa69d188bfee801e4f26f1611bc7b54"></span><em class="property"><span class="pre">struct</span></em> <span class="pre">ptirq_remapping_info</span> <span class="pre">*</span><code class="sig-name descname"><span class="pre">ptirq_alloc_entry</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">struct</span></em> <span class="pre">acrn_vm</span> <span class="pre">*</span><em><span class="pre">vm</span></em>, <span class="pre">uint32_t</span> <em><span class="pre">intr_type</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.ptirq_alloc_entry" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Allocate a ptirq_remapping_info entry. </p>
<p>Allocate a ptirq_remapping_info entry for hypervisor to store the remapping information. The total number of the entries is statically defined as CONFIG_MAX_PT_IRQ_ENTRIES. Appropriate number should be configured on different platforms.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> – <strong>[in]</strong> acrn_vm that the entry allocated for. </p></li>
<li><p><strong>intr_type</strong> – <strong>[in]</strong> interrupt type: PTDEV_INTR_MSI or PTDEV_INTR_INTX</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>NULL</strong> – when the number of entries allocated is CONFIG_MAX_PT_IRQ_ENTRIES </p></li>
<li><p><strong>!NULL</strong> – when the number of entries allocated is less than CONFIG_MAX_PT_IRQ_ENTRIES </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt id="c.ptirq_release_entry">
<span class="target" id="group__acrn__passthrough_ga7431bb466468ae111721e6bac26b2870_1ga7431bb466468ae111721e6bac26b2870"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">ptirq_release_entry</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">struct</span></em> <span class="pre">ptirq_remapping_info</span> <span class="pre">*</span><em><span class="pre">entry</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.ptirq_release_entry" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Release a ptirq_remapping_info entry. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entry</strong> – <strong>[in]</strong> the ptirq_remapping_info entry to release. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt id="c.ptdev_release_all_entries">
<span class="target" id="group__acrn__passthrough_gac1a6ffabb25ac055ecb91d5e3d48b9e4_1gac1a6ffabb25ac055ecb91d5e3d48b9e4"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">ptdev_release_all_entries</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <em class="property"><span class="pre">struct</span></em> <span class="pre">acrn_vm</span> <span class="pre">*</span><em><span class="pre">vm</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.ptdev_release_all_entries" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Deactivate and release all ptirq entries for a VM. </p>
<p>This function deactivates and releases all ptirq entries for a VM. The function should only be called after the VM is already down.</p>
<p><dl class="simple">
<dt><strong>Preconditions</strong></dt><dd><p>VM is already down </p>
</dd>
</dl>
</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>vm</strong> – <strong>[in]</strong> acrn_vm on which the ptirq entries will be released</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt id="c.ptirq_activate_entry">
<span class="target" id="group__acrn__passthrough_gaf47f3d6caec01ed87bba0b3b7b2bc729_1gaf47f3d6caec01ed87bba0b3b7b2bc729"></span><span class="pre">int32_t</span> <code class="sig-name descname"><span class="pre">ptirq_activate_entry</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">struct</span></em> <span class="pre">ptirq_remapping_info</span> <span class="pre">*</span><em><span class="pre">entry</span></em>, <span class="pre">uint32_t</span> <em><span class="pre">phys_irq</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.ptirq_activate_entry" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Activate a irq for the associated passthrough device. </p>
<p>After activating the ptirq entry, the physical interrupt irq of passthrough device will be handled by the handler ptirq_interrupt_handler.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entry</strong> – <strong>[in]</strong> the ptirq_remapping_info entry that will be associated with the physical irq. </p></li>
<li><p><strong>phys_irq</strong> – <strong>[in]</strong> physical interrupt irq for the entry</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>success</strong> – when return value &gt;=0 </p></li>
<li><p><strong>failure</strong> – when return value &lt; 0 </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt id="c.ptirq_deactivate_entry">
<span class="target" id="group__acrn__passthrough_ga2af2abdb38dac5c73d3b4158ee302bbe_1ga2af2abdb38dac5c73d3b4158ee302bbe"></span><span class="pre">void</span> <code class="sig-name descname"><span class="pre">ptirq_deactivate_entry</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">struct</span></em> <span class="pre">ptirq_remapping_info</span> <span class="pre">*</span><em><span class="pre">entry</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.ptirq_deactivate_entry" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>De-activate a irq for the associated passthrough device. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>entry</strong> – <strong>[in]</strong> the ptirq_remapping_info entry that will be de-activated. </p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt id="c.ptirq_dequeue_softirq">
<span class="target" id="group__acrn__passthrough_gaf6878738c1ab8a47232b05fd05d7f61b_1gaf6878738c1ab8a47232b05fd05d7f61b"></span><em class="property"><span class="pre">struct</span></em> <span class="pre">ptirq_remapping_info</span> <span class="pre">*</span><code class="sig-name descname"><span class="pre">ptirq_dequeue_softirq</span></code><span class="sig-paren">(</span><span class="pre">uint16_t</span> <em><span class="pre">pcpu_id</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.ptirq_dequeue_softirq" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Dequeue an entry from per cpu ptdev softirq queue. </p>
<p>Dequeue an entry from the ptdev softirq queue on the specific physical cpu.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pcpu_id</strong> – <strong>[in]</strong> physical cpu id</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><ul class="simple">
<li><p><strong>NULL</strong> – when the queue is empty </p></li>
<li><p><strong>!NULL</strong> – when there is available ptirq_remapping_info entry in the queue </p></li>
</ul>
</p>
</dd>
</dl>
</dd></dl>

<dl class="c function">
<dt id="c.ptirq_get_intr_data">
<span class="target" id="group__acrn__passthrough_gad6dce35a7aa78b0a2e02fae7f3594cfd_1gad6dce35a7aa78b0a2e02fae7f3594cfd"></span><span class="pre">uint32_t</span> <code class="sig-name descname"><span class="pre">ptirq_get_intr_data</span></code><span class="sig-paren">(</span><em class="property"><span class="pre">const</span></em> <em class="property"><span class="pre">struct</span></em> <span class="pre">acrn_vm</span> <span class="pre">*</span><em><span class="pre">target_vm</span></em>, <span class="pre">uint64_t</span> <span class="pre">*</span><em><span class="pre">buffer</span></em>, <span class="pre">uint32_t</span> <em><span class="pre">buffer_cnt</span></em><span class="sig-paren">)</span><a class="headerlink" href="#c.ptirq_get_intr_data" title="Permalink to this definition">¶</a><br /></dt>
<dd><p>Get the interrupt information and store to the buffer provided. </p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>target_vm</strong> – <strong>[in]</strong> the VM to get the interrupt information. </p></li>
<li><p><strong>buffer</strong> – <strong>[out]</strong> where interrupt information is stored. </p></li>
<li><p><strong>buffer_cnt</strong> – <strong>[in]</strong> the size of the buffer.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><strong>the</strong> – actual size the buffer filled with the interrupt information </p>
</dd>
</dl>
</dd></dl>

</div>
</div>


           </div>
          </div>

          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="hv-vt-d.html" class="btn btn-neutral float-left" title="VT-d" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="mmio-dev-passthrough.html" class="btn btn-neutral float-right" title="MMIO Device Passthrough" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2022 Project ACRN™, a Series of LF Projects, LLC.

<span class="lastupdated">Last updated on Mar 20, 2022. Published on Apr 01, 2022</span>

  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-K4WWJZD"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'GTM-K4WWJZD', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>