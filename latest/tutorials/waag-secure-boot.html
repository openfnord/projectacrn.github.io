<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Enable Secure Boot in Windows &mdash; Project ACRN™ 3.1-unstable documentation</title><link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/graphviz.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/segment.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/menu.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_tabs/semantic-ui-2.4.1/tab.min.css" type="text/css" />
      <link rel="stylesheet" href="../_static/sphinx_tabs/tabs.css" type="text/css" />
      <link rel="stylesheet" href="../_static/acrn-custom.css" type="text/css" /><link rel="shortcut icon" href="../_static/ACRN-favicon-32x32.png"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/acrn-custom.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Enable S5 in ACRN" href="enable_s5.html" />
    <link rel="prev" title="Enable Intel Resource Director Technology (RDT) Configurations" href="rdt_configuration.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> Project ACRN™<img src="../_static/ACRN_Logo_200w.png" class="logo" alt="Logo"/>
          </a>
              <div class="version">
                latest
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
  
  <div class="rst-versions" data-toggle="rst-versions" role="note" aria-label="versions">
    <span class="rst-current-version" data-toggle="rst-current-version">
      <span class="fa fa-book"> Project ACRN</span>
      v: latest
      <span class="fa fa-caret-down"></span>
    </span>
    <div class="rst-other-versions">
      <dl>
        <dt>Document Versions</dt>
        
          <dd><a href="/latest/">latest</a></dd>
        
          <dd><a href="/3.0/">3.0</a></dd>
        
          <dd><a href="/2.7/">2.7</a></dd>
        
          <dd><a href="/2.6/">2.6</a></dd>
        
          <dd><a href="/2.5/">2.5</a></dd>
        
          <dd><a href="/2.0/">2.0</a></dd>
        
          <dd><a href="/1.6.1/">1.6.1</a></dd>
        
          <dd><a href="/1.0/">1.0</a></dd>
        
      </dl>
      <dl>
        <dt>projectacrn.org links</dt>
          <dd>
            <a href="https://www.projectacrn.org/">Project Home</a>
          </dd>
          <dd>
            <a href="https://github.com/projectacrn/acrn-hypervisor/wiki">Wiki</a>
          </dd>
      </dl>
    </div>
  </div>
  
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Documentation Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">What Is ACRN</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.html#id1">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.html#licensing">Licensing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.html#key-capabilities">Key Capabilities</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.html#community-support">Community Support</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.html#resources">Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.html#background">Background</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.html#high-level-architecture">High-Level Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.html#static-configuration-based-on-scenarios">Static Configuration Based on Scenarios</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.html#scenario-types">Scenario Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.html#acrn-device-model-architecture">ACRN Device Model Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.html#device-passthrough">Device Passthrough</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../introduction/index.html#hardware-support-for-device-passthrough">Hardware Support for Device Passthrough</a></li>
<li class="toctree-l3"><a class="reference internal" href="../introduction/index.html#hypervisor-support-for-device-passthrough">Hypervisor Support for Device Passthrough</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.html#boot-sequence">Boot Sequence</a></li>
<li class="toctree-l2"><a class="reference internal" href="../introduction/index.html#learn-more">Learn More</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../try.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/hardware.html">Supported Hardware</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/hardware.html#selecting-hardware">Selecting Hardware</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/overview_dev.html">Configuration and Development Overview</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overview_dev.html#development-environment">Development Environment</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overview_dev.html#general-process-for-building-an-acrn-hypervisor">General Process for Building an ACRN Hypervisor</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overview_dev.html#icon-light-step-1-select-hardware-and-scenario"> Step 1: Select Hardware and Scenario</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overview_dev.html#select-your-hardware">Select Your Hardware</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overview_dev.html#select-your-scenario">Select Your Scenario</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overview_dev.html#icon-host-step-2-prepare-the-development-computer"> Step 2: Prepare the Development Computer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overview_dev.html#icon-target-step-3-generate-a-board-configuration-file"> Step 3: Generate a Board Configuration File</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overview_dev.html#configure-bios-settings">Configure BIOS Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/overview_dev.html#use-the-board-inspector-to-generate-a-board-configuration-file">Use the Board Inspector to Generate a Board Configuration File</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overview_dev.html#icon-host-step-4-generate-a-scenario-configuration-file-and-launch-scripts"> Step 4: Generate a Scenario Configuration File and Launch Scripts</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overview_dev.html#icon-host-step-5-build-acrn"> Step 5: Build ACRN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overview_dev.html#icon-target-step-6-install-and-run-acrn"> Step 6: Install and Run ACRN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/overview_dev.html#learn-more">Learn More</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/getting-started.html">Getting Started Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/getting-started.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/getting-started.html#prepare-the-development-computer">Prepare the Development Computer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/getting-started.html#prepare-the-target-and-generate-a-board-configuration-file">Prepare the Target and Generate a Board Configuration File</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/getting-started.html#set-up-the-target-hardware">Set Up the Target Hardware</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/getting-started.html#install-os-on-the-target">Install OS on the Target</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/getting-started.html#configure-target-bios-settings">Configure Target BIOS Settings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/getting-started.html#generate-a-board-configuration-file">Generate a Board Configuration File</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/getting-started.html#generate-a-scenario-configuration-file-and-launch-script">Generate a Scenario Configuration File and Launch Script</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/getting-started.html#build-acrn">Build ACRN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/getting-started.html#install-acrn">Install ACRN</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/getting-started.html#run-acrn-and-the-service-vm">Run ACRN and the Service VM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/getting-started.html#launch-the-user-vm">Launch the User VM</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/getting-started.html#next-steps">Next Steps</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting-started/sample-app.html">Sample Application User Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/sample-app.html#prerequisites-environment-and-images">Prerequisites Environment and Images</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/sample-app.html#prepare-the-acrn-development-and-target-environment">Prepare the ACRN Development and Target environment</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../getting-started/sample-app.html#preparing-the-target-system">Preparing the Target System</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/sample-app.html#make-the-sample-application">Make the Sample Application</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/sample-app.html#make-the-hmi-vm-image">Make the HMI_VM image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/sample-app.html#make-the-rt-vm-image">Make the RT_VM image</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/sample-app.html#create-and-configure-the-acrn-scenario">Create and Configure the ACRN Scenario</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/sample-app.html#build-the-acrn-hypervisor-and-service-vm-images">Build the ACRN Hypervisor and Service VM images</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/sample-app.html#copy-files-from-the-development-system-to-your-target-system">Copy files from the development system to your target system</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/sample-app.html#install-and-run-acrn-on-the-target-system">Install and Run ACRN on the Target System</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting-started/sample-app.html#congratulations">Congratulations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../develop.html">Advanced Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../develop.html#advanced-scenario-tutorials">Advanced Scenario Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="using_hybrid_mode_on_nuc.html">Getting Started Guide for ACRN Hybrid Mode</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_hybrid_mode_on_nuc.html#set-up-base-installation">Set-up base installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_hybrid_mode_on_nuc.html#prepare-the-zephyr-image">Prepare the Zephyr image</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_hybrid_mode_on_nuc.html#set-up-acrn-on-your-device">Set-up ACRN on your device</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_hybrid_mode_on_nuc.html#update-ubuntu-grub">Update Ubuntu GRUB</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_hybrid_mode_on_nuc.html#hybrid-scenario-startup-check">Hybrid Scenario Startup Check</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../develop.html#user-vm-tutorials">User VM Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user_vm_guide.html">User VM Guide</a><ul>
<li class="toctree-l4"><a class="reference internal" href="user_vm_guide.html#user-vm-os-choices">User VM OS Choices</a></li>
<li class="toctree-l4"><a class="reference internal" href="user_vm_guide.html#configuration-overview">Configuration Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="user_vm_guide.html#user-vm-persistence">User VM Persistence</a></li>
<li class="toctree-l4"><a class="reference internal" href="user_vm_guide.html#standard-vm-os-considerations">Standard VM OS Considerations</a></li>
<li class="toctree-l4"><a class="reference internal" href="user_vm_guide.html#real-time-vm-os-considerations">Real-time VM OS Considerations</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="using_ubuntu_as_user_vm.html">Run Ubuntu as the User VM OS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_ubuntu_as_user_vm.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_ubuntu_as_user_vm.html#build-the-ubuntu-kvm-image">Build the Ubuntu KVM Image</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_ubuntu_as_user_vm.html#launch-the-ubuntu-image-as-the-user-vm">Launch the Ubuntu Image as the User VM</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="using_windows_as_user_vm.html">Run Windows as the User VM OS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_windows_as_user_vm.html#acrn-service-vm-setup">ACRN Service VM Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_windows_as_user_vm.html#setup-for-using-windows-as-the-guest-vm">Setup for Using Windows as the Guest VM</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_windows_as_user_vm.html#acrn-windows-verified-feature-list">ACRN Windows Verified Feature List</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_windows_as_user_vm.html#explanation-for-acrn-dm-popular-command-lines">Explanation for acrn-dm Popular Command Lines</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_windows_as_user_vm.html#secure-boot-enabling">Secure Boot Enabling</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_windows_as_user_vm.html#activate-windows-10">Activate Windows 10</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="using_xenomai_as_user_vm.html">Run Xenomai as the User RTVM OS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_xenomai_as_user_vm.html#build-the-xenomai-kernel">Build the Xenomai Kernel</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_xenomai_as_user_vm.html#launch-the-rtvm">Launch the RTVM</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_xenomai_as_user_vm.html#install-the-xenomai-libraries-and-tools">Install the Xenomai Libraries and Tools</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="using_vxworks_as_user_vm.html">Run VxWorks as the User RTVM OS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_vxworks_as_user_vm.html#steps-for-using-vxworks-as-user-vm">Steps for Using VxWorks as User VM</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="using_zephyr_as_user_vm.html">Run Zephyr as the User RTVM OS</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_zephyr_as_user_vm.html#introduction-to-zephyr">Introduction to Zephyr</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_zephyr_as_user_vm.html#steps-for-using-zephyr-as-user-vm">Steps for Using Zephyr as User VM</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../develop.html#configuration-tutorials">Configuration Tutorials</a><ul>
<li class="toctree-l3"><a class="reference internal" href="acrn_configuration_tool.html">Introduction to ACRN Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="acrn_configuration_tool.html#types-of-configurations">Types of Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn_configuration_tool.html#using-acrn-configuration-toolset">Using ACRN Configuration Toolset</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="board_inspector_tool.html">Board Inspector Tool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="board_inspector_tool.html#about-the-board-inspector-tool">About the Board Inspector Tool</a></li>
<li class="toctree-l4"><a class="reference internal" href="board_inspector_tool.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="board_inspector_tool.html#generate-a-board-configuration-file">Generate a Board Configuration File</a></li>
<li class="toctree-l4"><a class="reference internal" href="board_inspector_tool.html#command-line-options">Command-Line Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="acrn_configurator_tool.html">ACRN Configurator Tool</a><ul>
<li class="toctree-l4"><a class="reference internal" href="acrn_configurator_tool.html#about-the-acrn-configurator-tool">About the ACRN Configurator Tool</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn_configurator_tool.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn_configurator_tool.html#scenario-error-checking">Scenario Error Checking</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn_configurator_tool.html#start-with-a-new-or-existing-configuration">Start with a New or Existing Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn_configurator_tool.html#navigate-the-configuration-screen">Navigate the Configuration Screen</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn_configurator_tool.html#import-a-board-configuration-file">Import a Board Configuration File</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn_configurator_tool.html#create-new-or-import-an-existing-scenario">Create New or Import an Existing Scenario</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn_configurator_tool.html#configure-settings-for-scenario-and-launch-scripts">Configure Settings for Scenario and Launch Scripts</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn_configurator_tool.html#build-acrn-configurator-from-source-code">Build ACRN Configurator From Source Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="upgrading_configuration.html">Upgrading ACRN Configurations to Recent Releases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="upgrading_configuration.html#board-xml">Board XML</a></li>
<li class="toctree-l4"><a class="reference internal" href="upgrading_configuration.html#scenario-xml">Scenario XML</a></li>
<li class="toctree-l4"><a class="reference internal" href="upgrading_configuration.html#launch-xml">Launch XML</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/config-options.html">Scenario Configuration Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#common-option-value-types">Common Option Value Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#hypervisor-options">Hypervisor Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#inter-vm-virtual-uart-connection">Inter-VM virtual UART connection</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#debug-options">Debug options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#memory-options">Memory options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#hypervisor-capacities">Hypervisor capacities</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#cache-region">CACHE_REGION</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#virtual-machine-options">Virtual Machine Options</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#physical-cpu-affinity">Physical CPU affinity</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#sgx-enclave-page-cache">SGX Enclave Page Cache</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#os-configuration">OS Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#mmio-resources">MMIO Resources</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#virtio-console-device">Virtio console device</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#virtio-network-device">Virtio network device</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/config-options.html#virtio-input-device">Virtio input device</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../reference/hv-make-options.html">Hypervisor Makefile Options</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/hv-make-options.html#build-options-and-targets">Build Options and Targets</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/hv-make-options.html#makefile-targets-for-configuration">Makefile Targets for Configuration</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user-guides/hv-parameters.html">ACRN Hypervisor Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/hv-parameters.html#generic-hypervisor-parameters">Generic Hypervisor Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user-guides/kernel-parameters.html">ACRN Kernel Parameters</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/kernel-parameters.html#generic-kernel-parameters">Generic Kernel Parameters</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user-guides/acrn-dm-parameters.html">Device Model Parameters and Launch Script</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-dm-parameters.html#device-model-parameters">Device Model Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-dm-parameters.html#emulated-pci-device-types">Emulated PCI Device Types</a></li>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-dm-parameters.html#launch-script">Launch Script</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../misc/packaging/README.html">ACRN Installation via Debian Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="tar_installation.html">ACRN Installation via Tar Files</a><ul>
<li class="toctree-l4"><a class="reference internal" href="tar_installation.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="tar_installation.html#build-the-tar-files">Build the Tar Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="tar_installation.html#install-and-run-acrn">Install and Run ACRN</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../develop.html#advanced-features">Advanced Features</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="vuart_configuration.html">Enable vUART Configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="vuart_configuration.html#about-vuart">About vUART</a></li>
<li class="toctree-l4"><a class="reference internal" href="vuart_configuration.html#dependencies-and-constraints">Dependencies and Constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="vuart_configuration.html#configuration-overview">Configuration Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="vuart_configuration.html#example-configuration">Example Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="vuart_configuration.html#learn-more">Learn More</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rdt_configuration.html">Enable Intel Resource Director Technology (RDT) Configurations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="rdt_configuration.html#about-intel-resource-director-technology-rdt">About Intel Resource Director Technology (RDT)</a></li>
<li class="toctree-l4"><a class="reference internal" href="rdt_configuration.html#dependencies-and-constraints">Dependencies and Constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="rdt_configuration.html#configuration-overview">Configuration Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="rdt_configuration.html#learn-more">Learn More</a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Enable Secure Boot in Windows</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#generate-platform-key-pk">Generate Platform Key (PK)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#download-kek-and-db-from-microsoft">Download KEK and DB From Microsoft</a></li>
<li class="toctree-l4"><a class="reference internal" href="#compile-ovmf-with-secure-boot-support">Compile OVMF With Secure Boot Support</a></li>
<li class="toctree-l4"><a class="reference internal" href="#use-qemu-to-inject-secure-boot-keys-into-ovmf">Use QEMU to Inject Secure Boot Keys Into OVMF</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="enable_s5.html">Enable S5 in ACRN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="enable_s5.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="enable_s5.html#s5-architecture">S5 Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="enable_s5.html#id2">Enable S5</a></li>
<li class="toctree-l4"><a class="reference internal" href="enable_s5.html#how-to-test">How to Test</a></li>
<li class="toctree-l4"><a class="reference internal" href="enable_s5.html#system-shutdown">System Shutdown</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="cpu_sharing.html">Enable CPU Sharing in ACRN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="cpu_sharing.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="cpu_sharing.html#scheduling-framework">Scheduling Framework</a></li>
<li class="toctree-l4"><a class="reference internal" href="cpu_sharing.html#cpu-affinity">CPU Affinity</a></li>
<li class="toctree-l4"><a class="reference internal" href="cpu_sharing.html#thread-object-state">Thread Object State</a></li>
<li class="toctree-l4"><a class="reference internal" href="cpu_sharing.html#scheduler">Scheduler</a></li>
<li class="toctree-l4"><a class="reference internal" href="cpu_sharing.html#example">Example</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sriov_virtualization.html">Enable SR-IOV Virtualization</a><ul>
<li class="toctree-l4"><a class="reference internal" href="sriov_virtualization.html#sr-iov-architectural-overview">SR-IOV Architectural Overview</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="gpu-passthru.html">Enable GPU Passthrough (GVT-d)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="gpu-passthru.html#about-gvt-d">About GVT-d</a></li>
<li class="toctree-l4"><a class="reference internal" href="gpu-passthru.html#dependencies-and-constraints">Dependencies and Constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="gpu-passthru.html#configuration-overview">Configuration Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="gpu-passthru.html#example-configuration">Example Configuration</a></li>
<li class="toctree-l4"><a class="reference internal" href="gpu-passthru.html#troubleshooting">Troubleshooting</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="run_kata_containers.html">Run Kata Containers on a Service VM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="run_kata_containers.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="run_kata_containers.html#install-docker">Install Docker</a></li>
<li class="toctree-l4"><a class="reference internal" href="run_kata_containers.html#install-kata-containers">Install Kata Containers</a></li>
<li class="toctree-l4"><a class="reference internal" href="run_kata_containers.html#run-a-kata-container-with-acrn">Run a Kata Container With ACRN</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rtvm_workload_design_guideline.html">Real-Time VM Application Design Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="rtvm_workload_design_guideline.html#run-rtvm-with-dedicated-resources-devices">Run RTVM With Dedicated Resources/Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtvm_workload_design_guideline.html#rtvm-with-virtio-pmd-polling-mode-driver-for-i-o-sharing">RTVM With Virtio PMD (Polling Mode Driver) for I/O Sharing</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtvm_workload_design_guideline.html#rtvm-with-hv-emulated-device">RTVM With HV Emulated Device</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtvm_workload_design_guideline.html#dm-emulated-device-except-pmd">DM Emulated Device (Except PMD)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="acrn_on_qemu.html">Enable ACRN Over QEMU/KVM</a><ul>
<li class="toctree-l4"><a class="reference internal" href="acrn_on_qemu.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn_on_qemu.html#prepare-service-vm-l1-guest">Prepare Service VM (L1 Guest)</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn_on_qemu.html#install-acrn-hypervisor">Install ACRN Hypervisor</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn_on_qemu.html#bring-up-user-vm-l2-guest">Bring Up User VM (L2 Guest)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="using_grub.html">Using GRUB to Boot ACRN</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_grub.html#using-pre-installed-grub">Using Pre-Installed GRUB</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_grub.html#installing-self-built-grub">Installing Self-Built GRUB</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="acrn-secure-boot-with-grub.html">Enable ACRN Secure Boot With GRUB</a><ul>
<li class="toctree-l4"><a class="reference internal" href="acrn-secure-boot-with-grub.html#acrn-secure-boot-sequence">ACRN Secure Boot Sequence</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn-secure-boot-with-grub.html#generate-gpg-key">Generate GPG Key</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn-secure-boot-with-grub.html#setup-standalone-grub-efi-binary">Setup Standalone GRUB EFI Binary</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn-secure-boot-with-grub.html#enable-uefi-secure-boot">Enable UEFI Secure Boot</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="acrn-secure-boot-with-efi-stub.html">Enable ACRN Secure Boot With EFI-Stub</a><ul>
<li class="toctree-l4"><a class="reference internal" href="acrn-secure-boot-with-efi-stub.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn-secure-boot-with-efi-stub.html#verified-configurations">Verified Configurations</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn-secure-boot-with-efi-stub.html#building">Building</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn-secure-boot-with-efi-stub.html#installing-without-sb-for-testing">Installing (without SB for testing)</a></li>
<li class="toctree-l4"><a class="reference internal" href="acrn-secure-boot-with-efi-stub.html#signing">Signing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="enable_ivshmem.html">Enable Inter-VM Shared Memory Communication (IVSHMEM)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="enable_ivshmem.html#about-inter-vm-shared-memory-communication-ivshmem">About Inter-VM Shared Memory Communication (IVSHMEM)</a></li>
<li class="toctree-l4"><a class="reference internal" href="enable_ivshmem.html#dependencies-and-constraints">Dependencies and Constraints</a></li>
<li class="toctree-l4"><a class="reference internal" href="enable_ivshmem.html#configuration-overview">Configuration Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="enable_ivshmem.html#learn-more">Learn More</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="inter-vm_communication.html">ACRN Inter-VM Communication</a><ul>
<li class="toctree-l4"><a class="reference internal" href="inter-vm_communication.html#inter-vm-vuart">Inter-VM vUART</a></li>
<li class="toctree-l4"><a class="reference internal" href="inter-vm_communication.html#inter-vm-network-communication">Inter-VM network communication</a></li>
<li class="toctree-l4"><a class="reference internal" href="inter-vm_communication.html#inter-vm-shared-memory-communication-ivshmem">Inter-VM shared memory communication (ivshmem)</a></li>
<li class="toctree-l4"><a class="reference internal" href="inter-vm_communication.html#how-to-implement-an-ivshmem-application-on-acrn">How to implement an Ivshmem application on ACRN</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../develop.html#debug">Debug</a><ul>
<li class="toctree-l3"><a class="reference internal" href="using_serial_port.html">Enable Serial Port on NUC</a><ul>
<li class="toctree-l4"><a class="reference internal" href="using_serial_port.html#option-1-using-the-serial-port-on-tgl-intel-nuc">Option 1: Using the Serial Port on TGL Intel NUC</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_serial_port.html#option-2-enabling-pcie-serial-port-on-tgl-intel-nuc">Option 2: Enabling PCIe Serial Port on TGL Intel NUC</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="debug.html">ACRN Debugging Tools</a><ul>
<li class="toctree-l4"><a class="reference internal" href="debug.html#acrn-console-command">ACRN Console Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="debug.html#an-example">An Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="debug.html#acrn-log">ACRN Log</a></li>
<li class="toctree-l4"><a class="reference internal" href="debug.html#acrn-trace">ACRN Trace</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="realtime_performance_tuning.html">ACRN Real-Time (RT) Performance Analysis</a><ul>
<li class="toctree-l4"><a class="reference internal" href="realtime_performance_tuning.html#vmexit-analysis-for-acrn-rt-performance">vmexit Analysis for ACRN RT Performance</a></li>
<li class="toctree-l4"><a class="reference internal" href="realtime_performance_tuning.html#collecting-performance-monitoring-counters-data">Collecting Performance Monitoring Counters Data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="rtvm_performance_tips.html">ACRN Real-Time VM Performance Tips</a><ul>
<li class="toctree-l4"><a class="reference internal" href="rtvm_performance_tips.html#background">Background</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtvm_performance_tips.html#mandatory-options-for-an-rtvm">Mandatory Options for an RTVM</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtvm_performance_tips.html#avoid-vm-exit-latency">Avoid VM-exit Latency</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtvm_performance_tips.html#isolating-the-impact-of-neighbor-vms">Isolating the Impact of Neighbor VMs</a></li>
<li class="toctree-l4"><a class="reference internal" href="rtvm_performance_tips.html#miscellaneous">Miscellaneous</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../user-guides/acrn-shell.html">ACRN Shell Commands</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../user-guides/acrn-shell.html#command-examples">Command Examples</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/README.html">ACRN-Crashlog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/README.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/README.html#building">Building</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/README.html#installing">Installing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/README.html#enabling-disabling">Enabling/Disabling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/README.html#source-code">Source Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/acrnprobe/README.html">Acrnprobe</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/acrnprobe/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/acrnprobe/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/acrnprobe/README.html#architecture">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/acrnprobe/README.html#source-files">Source Files</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/acrnprobe/README.html#configuration-files">Configuration Files</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/acrnprobe/conf.html">Acrnprobe Configuration</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/acrnprobe/conf.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/acrnprobe/conf.html#layout">Layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/acrnprobe/conf.html#properties-of-group-members">Properties of Group Members</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/acrnprobe/conf.html#crash-tree-in-acrnprobe">Crash Tree in Acrnprobe</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/acrnprobe/conf.html#sections">Sections</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/usercrash/README.html">Usercrash</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/usercrash/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/usercrash/README.html#design">Design</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/usercrash/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_crashlog/usercrash/README.html#source-code">Source Code</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../misc/debug_tools/acrn_log/README.html">Acrnlog</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_log/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_log/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_log/README.html#build-and-install">Build and Install</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../misc/debug_tools/acrn_trace/README.html">Acrntrace</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_trace/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_trace/README.html#usage">Usage</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/debug_tools/acrn_trace/README.html#build-and-install">Build and Install</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../misc/services/acrn_manager/README.html">Acrnctl and Acrnd</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../misc/services/acrn_manager/README.html#description">Description</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/services/acrn_manager/README.html#acrnd">Acrnd</a></li>
<li class="toctree-l4"><a class="reference internal" href="../misc/services/acrn_manager/README.html#build-and-install">Build and Install</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../contribute.html">Developer Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../contribute.html#design-guides">Design Guides</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/modularity.html">ACRN Hypervisor: Modular Design</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/modularity.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/modularity.html#principles">Principles</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/modularity.html#architecture">Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/modularity.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/hld/index.html">High-Level Design Guides</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-overview.html">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-hypervisor.html">Hypervisor</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-devicemodel.html">Device Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-emulated-devices.html">Emulated Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-virtio-devices.html">Virtio Devices</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-power-management.html">Power Management</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-trace-log.html">Tracing and Logging</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/hld/hld-security.html">Security</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/sw_design_guidelines.html">Software Design Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/sw_design_guidelines.html#error-detection-and-error-handling">Error Detection and Error Handling</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/sw_design_guidelines.html#module-level-configuration-design-guidelines">Module Level Configuration Design Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/sw_design_guidelines.html#references">References</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/trusty.html">Trusty TEE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/trusty.html#introduction">Introduction</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/trusty.html#trusty-architecture">Trusty Architecture</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/trusty.html#trusty-specific-hypercalls">Trusty Specific Hypercalls</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/trusty.html#trusty-boot-flow">Trusty Boot Flow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/trusty.html#ept-hierarchy">EPT Hierarchy</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/l1tf.html">L1 Terminal Fault Mitigation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/l1tf.html#overview">Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/l1tf.html#l1tf-problem-in-acrn">L1TF Problem in ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/l1tf.html#l1tf-mitigation-in-acrn">L1TF Mitigation in ACRN</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/l1tf.html#mitigation-recommendations">Mitigation Recommendations</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/l1tf.html#mitigation-status">Mitigation Status</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contribute.html#contribute-guides">Contribute Guides</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/contribute_guidelines.html">Contribution Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#technical-steering-committee-tsc">Technical Steering Committee (TSC)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#licensing">Licensing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#developer-certification-of-origin-dco">Developer Certification of Origin (DCO)</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#repository-layout">Repository Layout</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#submitting-issues">Submitting Issues</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#contribution-tools-and-git-setup">Contribution Tools and Git Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#coding-style">Coding Style</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#contribution-workflow">Contribution Workflow</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/contribute_guidelines.html#commit-guidelines">Commit Guidelines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/coding_guidelines.html">Coding Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/c_coding_guidelines.html">C Programming Language Coding Guidelines</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/asm_coding_guidelines.html">Assembly Language Coding Guidelines</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/doc_guidelines.html">Documentation Guidelines</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#headings">Headings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#content-highlighting">Content Highlighting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#lists">Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#multi-column-lists">Multi-Column Lists</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#tables">Tables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#file-names-and-commands">File Names and Commands</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#branch-specific-file-links">Branch-Specific File Links</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#internal-cross-reference-linking">Internal Cross-Reference Linking</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#non-ascii-characters">Non-ASCII Characters</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#code-and-command-examples">Code and Command Examples</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#images">Images</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#tabs-spaces-and-indenting">Tabs, Spaces, and Indenting</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#background-colors">Background Colors</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#drawings">Drawings</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#alternative-tabbed-content">Alternative Tabbed Content</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#instruction-steps">Instruction Steps</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#first-instruction-step">First Instruction Step</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#second-instruction-step">Second Instruction Step</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#configuration-option-documentation">Configuration Option Documentation</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/doc_guidelines.html#documentation-generation">Documentation Generation</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../developer-guides/graphviz.html">Drawings Using Graphviz</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/graphviz.html#simple-directed-graph">Simple Directed Graph</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/graphviz.html#adding-edge-labels">Adding Edge Labels</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/graphviz.html#tables">Tables</a></li>
<li class="toctree-l4"><a class="reference internal" href="../developer-guides/graphviz.html#finite-state-machine">Finite-State Machine</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="docbuild.html">ACRN Documentation Generation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#documentation-overview">Documentation Overview</a></li>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#set-up-the-documentation-working-folders">Set Up the Documentation Working Folders</a></li>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#install-the-documentation-tools">Install the Documentation Tools</a></li>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#documentation-presentation-theme">Documentation Presentation Theme</a></li>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#run-the-documentation-processors">Run the Documentation Processors</a></li>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#publish-content">Publish Content</a></li>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#document-versioning">Document Versioning</a></li>
<li class="toctree-l4"><a class="reference internal" href="docbuild.html#filter-expected-warnings">Filter Expected Warnings</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../contribute.html#api-documentation">API Documentation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../api/index.html">API Documentation</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../api/hypercall_api.html">Hypercall APIs</a></li>
<li class="toctree-l4"><a class="reference internal" href="../api/devicemodel_api.html">Device Model APIs</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../release_notes/index.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/release_notes_3.1.html">ACRN v3.1 (Sep 2022) Draft</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_3.1.html#what-s-new-in-v3-1">What’s New in v3.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_3.1.html#upgrading-to-v3-1-from-previous-releases">Upgrading to v3.1 from Previous Releases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_3.1.html#generate-new-board-xml">Generate New Board XML</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_3.1.html#update-configuration-options">Update Configuration Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_3.1.html#document-updates">Document Updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_3.1.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_3.1.html#known-issues">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/release_notes_3.0.1.html">ACRN v3.0.1 (Jul 2022)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_3.0.1.html#what-s-new-in-v3-0-1">What’s New in v3.0.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/release_notes_3.0.html">ACRN v3.0 (Jun 2022)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_3.0.html#what-s-new-in-v3-0">What’s New in v3.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_3.0.html#upgrading-to-v3-0-from-previous-releases">Upgrading to v3.0 from Previous Releases</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_3.0.html#generate-new-board-xml">Generate New Board XML</a></li>
<li class="toctree-l4"><a class="reference internal" href="../release_notes/release_notes_3.0.html#update-configuration-options">Update Configuration Options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_3.0.html#document-updates">Document Updates</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_3.0.html#fixed-issues-details">Fixed Issues Details</a></li>
<li class="toctree-l3"><a class="reference internal" href="../release_notes/release_notes_3.0.html#known-issues">Known Issues</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../release_notes/index.html#release-notes-archive">Release Notes Archive</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../asa.html">Security Advisory</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../asa.html#addressed-in-acrn-v3-0-1">Addressed in ACRN v3.0.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asa.html#addressed-in-acrn-v2-7">Addressed in ACRN v2.7</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asa.html#addressed-in-acrn-v2-6">Addressed in ACRN v2.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asa.html#addressed-in-acrn-v2-5">Addressed in ACRN v2.5</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asa.html#addressed-in-acrn-v2-3">Addressed in ACRN v2.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asa.html#addressed-in-acrn-v2-1">Addressed in ACRN v2.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asa.html#addressed-in-acrn-v1-6-1">Addressed in ACRN v1.6.1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asa.html#addressed-in-acrn-v1-6">Addressed in ACRN v1.6</a></li>
<li class="toctree-l2"><a class="reference internal" href="../asa.html#addressed-in-acrn-v1-4">Addressed in ACRN v1.4</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary of Terms</a></li>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
</ul>


        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Project ACRN™</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
  <!-- Latest -->
  
  

  <li><a href="../index.html">Latest</a> &raquo;</li>
  
     <li><a href="../develop.html">Advanced Guides</a> &raquo;</li>
  
  <li>Enable Secure Boot in Windows</li>

      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tutorials/waag-secure-boot.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
  
    <div class="admonition important">
        <p class="admonition-title">Important</p>
        <p>This is the latest documentation for the unstable development branch of
        Project ACRN (master).<br/>Use the drop-down menu on the left to select
        documentation for a stable release such as <a href="/3.0/">v3.0</a> or
        <a href="/2.7/">v2.7</a>.</p>
    </div>
  
  
           <div itemprop="articleBody">
             
  <div class="section" id="enable-secure-boot-in-windows">
<span id="how-to-enable-secure-boot-for-windows"></span><h1>Enable Secure Boot in Windows<a class="headerlink" href="#enable-secure-boot-in-windows" title="Permalink to this headline">¶</a></h1>
<p>This document shows how to enable secure boot to launch Windows 10
as a guest through OVMF on ACRNGT, including:</p>
<ul class="simple">
<li><p>Generate Platform Key</p></li>
<li><p>Get KEK and DB from Microsoft</p></li>
<li><p>Inject PK, KEK and DB into OVMF</p></li>
</ul>
<div class="section" id="generate-platform-key-pk">
<h2>Generate Platform Key (PK)<a class="headerlink" href="#generate-platform-key-pk" title="Permalink to this headline">¶</a></h2>
<p>In UEFI secure boot, the Platform Key establishes a trust relationship
between the platform owner and the platform firmware. According to
<a class="reference external" href="https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/windows-secure-boot-key-creation-and-management-guidance">Microsoft’s secure boot documentation</a>,
section 1.5, the PK is a self-signed certificate owned by the OEM, and
the OEM can generate their own PK.</p>
<p>Here we show two ways to generate a PK: <code class="docutils literal notranslate"><span class="pre">openssl</span></code> and Microsoft tools.</p>
<div class="section" id="generate-pk-using-openssl">
<h3>Generate PK Using OpenSSL<a class="headerlink" href="#generate-pk-using-openssl" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Generate a Self-Signed Certificate as PK from a new key using the
<code class="docutils literal notranslate"><span class="pre">openssl</span> <span class="pre">req</span></code> command.  You will need to answer the
Certificate Signing Request (CSR) information prompts to complete the
process; use your country, state, and other information as appropriate.</p>
<p>For example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ openssl req -newkey rsa:2048 -nodes -keyout PKpriv.key -x509 -days 365 -out PK.crt
Generating a 2048 bit RSA private key
....+++
.+++
writing new private key to &#39;PKpriv.key&#39;
-----
You are about to be asked to enter information that will be incorporated
into your certificate request.
What you are about to enter is what is called a Distinguished Name or a DN.
There are quite a few fields but you can leave some blank
For some fields there will be a default value,
If you enter &#39;.&#39;, the field will be left blank.
-----
Country Name (2 letter code) [AU]:CN
State or Province Name (full name) [Some-State]:Shanghai
Locality Name (eg, city) []:Shanghai
Organization Name (eg, company) [Internet Widgits Pty Ltd]:Intel
Organizational Unit Name (eg, section) []:Intel
Common Name (e.g. server FQDN or YOUR name) []:
Email Address []:
</pre></div>
</div>
</li>
<li><p>You can also generate the self-signed certificate from an existing
key, using the <code class="docutils literal notranslate"><span class="pre">openssl</span> <span class="pre">req</span></code> command, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openssl</span> <span class="n">req</span> <span class="o">-</span><span class="n">key</span> <span class="n">testpriv</span><span class="o">.</span><span class="n">key</span> <span class="o">-</span><span class="n">new</span> <span class="o">-</span><span class="n">x509</span> <span class="o">-</span><span class="n">days</span> <span class="mi">365</span> <span class="o">-</span><span class="n">out</span> <span class="n">PK</span><span class="o">.</span><span class="n">crt</span>
</pre></div>
</div>
</li>
<li><p>View the content of certificate using the <code class="docutils literal notranslate"><span class="pre">openssl</span> <span class="pre">x509</span></code> command:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ openssl x509 -text -noout -in PK2.crt

Certificate:
    Data:
        Version: 3 (0x2)
        Serial Number: 10097816361374596362 (0x8c22a67aeadc3d0a)
        Signature Algorithm: sha256WithRSAEncryption
        Issuer: C=CN, ST=Shanghai, L=Shanghai, O=Intel, OU=Intel
        Validity
            Not Before: Jun 26 06:29:14 2019 GMT
            Not After : Jun 25 06:29:14 2020 GMT
        Subject: C=CN, ST=Shanghai, L=Shanghai, O=Intel, OU=Intel
        Subject Public Key Info:
            Public Key Algorithm: rsaEncryption
            Public-Key: (2048 bit)
            Modulus:
                00:9e:15:70:40:8c:b0:a7:c2:dd:45:15:e9:ab:c2:
                d9:3d:d7:32:1e:7f:ec:1d:26:e3:d3:07:2c:5c:40:
                8a:42:12:d3:31:59:2c:f0:b0:f7:3d:94:51:ae:b8:
                25:16:ab:98:97:60:68:67:80:e1:77:85:aa:f2:70:
                f3:47:fc:39:8c:9c:25:46:a8:ca:4f:aa:8f:d1:db:
                f1:50:9b:d9:b6:3d:28:bf:5c:bf:1a:52:12:4c:e2:
                04:dd:fe:04:f1:98:3a:9f:a7:ff:f9:43:43:f7:8b:
                48:48:ee:d8:2e:b1:25:26:97:ca:1f:94:1c:00:1e:
                68:8f:e1:30:3d:3c:1d:99:32:d0:d3:08:0b:ed:4c:
                4b:b4:7c:42:b9:1c:e4:ef:df:47:cf:52:37:7e:6e:
                a1:87:02:f9:23:6b:f4:22:e7:a8:8a:40:4c:5d:ff:
                f2:9f:bd:05:68:15:5c:1a:03:e3:4b:80:55:08:38:
                78:1f:e7:4c:dc:cd:49:22:ef:c0:60:4a:c2:b2:c9:
                cb:2b:5c:e2:c8:1d:ec:9e:2d:eb:ed:b1:d7:53:54:
                ea:ce:1a:f2:1c:f9:19:2e:c4:6f:fa:f2:46:bd:48:
                bc:84:f2:a7:b4:1c:0c:60:26:eb:b1:31:d2:76:24:
                df:21:0d:4e:fb:80:3d:ce:8e:a4:5c:8f:8d:b5:51:
                88:a3
            Exponent: 65537 (0x10001)
    X509v3 extensions:
        X509v3 Subject Key Identifier:
            4D:A0:DC:F6:6C:56:1E:D2:25:C5:E3:EE:5D:0C:70:ED:71:E7:72:AA
    X509v3 Authority Key Identifier:
        keyid:4D:A0:DC:F6:6C:56:1E:D2:25:C5:E3:EE:5D:0C:70:ED:71:E7:72:AA

    X509v3 Basic Constraints:
        CA:TRUE
    Signature Algorithm: sha256WithRSAEncryption
        24:0a:38:57:49:e5:35:05:58:d9:88:03:eb:3a:8c:5b:0d:88:
        70:58:ea:77:b2:4c:37:ff:87:52:b7:f3:bd:0f:6f:5e:7c:fc:
        28:16:37:19:23:d0:90:af:ed:1e:f3:36:ee:9d:66:0e:7c:07:
        5b:7d:0a:2a:fa:80:8c:6a:35:48:2d:50:9e:d2:f4:fc:d1:2a:
        ed:f5:7f:e4:d9:ec:ac:09:10:52:5c:b9:c7:68:4a:91:98:33:
        95:c3:23:4a:06:ca:ec:d3:ef:46:94:92:61:88:e4:e2:f5:db:
        c1:7a:a7:98:9d:59:0d:43:c2:2a:46:11:74:53:44:37:08:cd:
        b1:99:36:b6:3f:5e:51:f2:8c:d7:a0:0c:c5:9f:68:ba:2b:ab:
        7a:57:1f:fd:c9:44:0d:b9:39:6e:52:8c:09:8b:eb:5f:ea:3d:
        d4:3d:05:17:1a:7f:47:92:38:94:1d:e0:59:d2:66:bb:37:95:
        1d:11:4b:70:a1:89:1f:09:5a:25:dc:80:ee:27:17:7e:4a:cc:
        32:63:1d:e2:89:27:b1:44:99:9f:fb:4d:45:31:23:49:7b:ba:
        21:05:eb:d8:8a:b3:d0:72:c0:19:97:2a:59:4b:d1:12:ce:04:
        c4:c6:61:6f:19:e4:c2:fa:6a:0f:c7:70:c9:08:85:0c:65:97:
        83:41:c6:4b
</pre></div>
</div>
</li>
<li><p>Convert certificate from PEM to DER using the <code class="docutils literal notranslate"><span class="pre">openssl</span> <span class="pre">x509</span></code>
command.</p>
<p>Only a DER format encoded certificate is supported. After conversion, save
<code class="docutils literal notranslate"><span class="pre">PK.der</span></code> for use:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">openssl</span> <span class="n">x509</span> <span class="o">-</span><span class="ow">in</span> <span class="n">PK</span><span class="o">.</span><span class="n">crt</span> <span class="o">-</span><span class="n">outform</span> <span class="n">der</span> <span class="o">-</span><span class="n">out</span> <span class="n">PK</span><span class="o">.</span><span class="n">der</span>
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="using-microsoft-tools">
<h3>Using Microsoft Tools<a class="headerlink" href="#using-microsoft-tools" title="Permalink to this headline">¶</a></h3>
<p>Microsoft documents explain <a class="reference external" href="https://docs.microsoft.com/en-us/windows-hardware/manufacture/desktop/secure-boot-key-generation-and-signing-using-hsm--example">how to use Microsoft tools to generate a secure boot key</a>,
which we’ll summarize below.</p>
<ul>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">certutil.exe</span></code> to list the Cryptographic Service Providers
(CSP)</p>
<blockquote>
<div><p>For the detailed information of each Microsoft Cryptographic Service
Provider, check the <a class="reference external" href="https://docs.microsoft.com/en-us/windows/desktop/seccrypto/microsoft-cryptographic-service-providers">Microsoft CRP document</a></p>
<p>Here, we chose “Microsoft Strong Cryptographic Provider” for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span>\\<span class="n">CertReq</span>\\<span class="n">test</span><span class="o">&gt;</span> <span class="n">certutil</span> <span class="o">-</span><span class="n">csplist</span>
<span class="n">Provider</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Microsoft</span> <span class="n">Base</span> <span class="n">Cryptographic</span> <span class="n">Provider</span> <span class="n">v1</span><span class="mf">.0</span>
<span class="n">Provider</span> <span class="n">Type</span><span class="p">:</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">PROV_RSA_FULL</span>

<span class="n">Provider</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Microsoft</span> <span class="n">Base</span> <span class="n">DSS</span> <span class="ow">and</span> <span class="n">Diffie</span><span class="o">-</span><span class="n">Hellman</span> <span class="n">Cryptographic</span> <span class="n">Provider</span>
<span class="n">Provider</span> <span class="n">Type</span><span class="p">:</span> <span class="mi">13</span> <span class="o">-</span> <span class="n">PROV_DSS_DH</span>

<span class="n">Provider</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Microsoft</span> <span class="n">Base</span> <span class="n">DSS</span> <span class="n">Cryptographic</span> <span class="n">Provider</span>
<span class="n">Provider</span> <span class="n">Type</span><span class="p">:</span> <span class="mi">3</span> <span class="o">-</span> <span class="n">PROV_DSS</span>

<span class="n">Provider</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Microsoft</span> <span class="n">Base</span> <span class="n">Smart</span> <span class="n">Card</span> <span class="n">Crypto</span> <span class="n">Provider</span>
<span class="n">Provider</span> <span class="n">Type</span><span class="p">:</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">PROV_RSA_FULL</span>

<span class="n">Provider</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Microsoft</span> <span class="n">DH</span> <span class="n">SChannel</span> <span class="n">Cryptographic</span> <span class="n">Provider</span>
<span class="n">Provider</span> <span class="n">Type</span><span class="p">:</span> <span class="mi">18</span> <span class="o">-</span> <span class="n">PROV_DH_SCHANNEL</span>

<span class="n">Provider</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Microsoft</span> <span class="n">Enhanced</span> <span class="n">Cryptographic</span> <span class="n">Provider</span> <span class="n">v1</span><span class="mf">.0</span>
<span class="n">Provider</span> <span class="n">Type</span><span class="p">:</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">PROV_RSA_FULL</span>

<span class="n">Provider</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Microsoft</span> <span class="n">Enhanced</span> <span class="n">DSS</span> <span class="ow">and</span> <span class="n">Diffie</span><span class="o">-</span><span class="n">Hellman</span> <span class="n">Cryptographic</span> <span class="n">Provider</span>
<span class="n">Provider</span> <span class="n">Type</span><span class="p">:</span> <span class="mi">13</span> <span class="o">-</span> <span class="n">PROV_DSS_DH</span>

<span class="n">Provider</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Microsoft</span> <span class="n">Enhanced</span> <span class="n">RSA</span> <span class="ow">and</span> <span class="n">AES</span> <span class="n">Cryptographic</span> <span class="n">Provider</span>
<span class="n">Provider</span> <span class="n">Type</span><span class="p">:</span> <span class="mi">24</span> <span class="o">-</span> <span class="n">PROV_RSA_AES</span>

<span class="n">Provider</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Microsoft</span> <span class="n">RSA</span> <span class="n">SChannel</span> <span class="n">Cryptographic</span> <span class="n">Provider</span>
<span class="n">Provider</span> <span class="n">Type</span><span class="p">:</span> <span class="mi">12</span> <span class="o">-</span> <span class="n">PROV_RSA_SCHANNEL</span>

<span class="n">Provider</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Microsoft</span> <span class="n">Strong</span> <span class="n">Cryptographic</span> <span class="n">Provider</span>
<span class="n">Provider</span> <span class="n">Type</span><span class="p">:</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">PROV_RSA_FULL</span>

<span class="n">Provider</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Microsoft</span> <span class="n">Software</span> <span class="n">Key</span> <span class="n">Storage</span> <span class="n">Provider</span>

<span class="n">Provider</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Microsoft</span> <span class="n">Passport</span> <span class="n">Key</span> <span class="n">Storage</span> <span class="n">Provider</span>

<span class="n">Provider</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Microsoft</span> <span class="n">Platform</span> <span class="n">Crypto</span> <span class="n">Provider</span>

<span class="n">Provider</span> <span class="n">Name</span><span class="p">:</span> <span class="n">Microsoft</span> <span class="n">Smart</span> <span class="n">Card</span> <span class="n">Key</span> <span class="n">Storage</span> <span class="n">Provider</span>
<span class="n">CertUtil</span><span class="p">:</span> <span class="o">-</span><span class="n">csplist</span> <span class="n">command</span> <span class="n">completed</span> <span class="n">successfully</span><span class="o">.</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Create request <code class="docutils literal notranslate"><span class="pre">inf</span></code> file, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">Version</span><span class="p">]</span>
<span class="n">Signature</span><span class="o">=</span> <span class="s2">&quot;$Windows NT$&quot;</span>
<span class="p">[</span><span class="n">NewRequest</span><span class="p">]</span>
<span class="n">ValidityPeriod</span> <span class="o">=</span> <span class="n">Years</span>
<span class="n">ValidityPeriodUnits</span> <span class="o">=</span> <span class="mi">6</span>
<span class="n">Subject</span> <span class="o">=</span> <span class="s2">&quot;CN=Corporation TODO Platform Key,O=TODO Corporation,L=TODO_City,S=TODO_State,C=TODO_Country&quot;</span>
<span class="n">MachineKeySet</span> <span class="o">=</span> <span class="n">true</span>
<span class="n">RequestType</span><span class="o">=</span><span class="n">Cert</span>
<span class="n">Exportable</span> <span class="o">=</span> <span class="n">FALSE</span>
<span class="n">HashAlgorithm</span> <span class="o">=</span> <span class="n">SHA256</span>
<span class="n">KeyAlgorithm</span> <span class="o">=</span> <span class="n">RSA</span>
<span class="n">KeyLength</span> <span class="o">=</span> <span class="mi">2048</span>
<span class="n">ProviderName</span> <span class="o">=</span> <span class="s2">&quot;Microsoft Strong Cryptographic Provider&quot;</span>
<span class="n">KeyUsage</span> <span class="o">=</span> <span class="mh">0xf0</span>
</pre></div>
</div>
</li>
<li><p>Generate the Platform Key using <code class="docutils literal notranslate"><span class="pre">certreq.exe</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span>\<span class="n">WINDOWS</span>\<span class="n">system32</span><span class="o">&gt;</span><span class="n">certreq</span><span class="o">.</span><span class="n">exe</span> <span class="o">-</span><span class="n">v</span> <span class="o">-</span><span class="n">new</span> <span class="o">-</span><span class="n">binary</span> <span class="n">request</span><span class="o">.</span><span class="n">inf</span> <span class="n">PKtestDER</span><span class="o">.</span><span class="n">cer</span>
<span class="n">Cert</span><span class="p">:</span> <span class="mi">4</span> <span class="o">-&gt;</span> <span class="mi">4</span>
<span class="n">Years</span><span class="p">:</span> <span class="mi">6</span> <span class="o">-&gt;</span> <span class="mi">6</span>
<span class="n">Installed</span> <span class="n">Certificate</span><span class="p">:</span>
<span class="n">Serial</span> <span class="n">Number</span><span class="p">:</span> <span class="mi">285</span><span class="n">c6f1ec39cc186495f8e55fa053593</span>
<span class="n">Subject</span><span class="p">:</span> <span class="n">CN</span><span class="o">=</span><span class="n">Intel</span> <span class="n">Platform</span> <span class="n">Key</span><span class="p">,</span> <span class="n">O</span><span class="o">=</span><span class="n">Intel</span><span class="p">,</span> <span class="n">L</span><span class="o">=</span><span class="n">Shanghai</span><span class="p">,</span> <span class="n">S</span><span class="o">=</span><span class="n">Shanghai</span><span class="p">,</span> <span class="n">C</span><span class="o">=</span><span class="n">CN</span>
<span class="n">NotBefore</span><span class="p">:</span> <span class="mi">3</span><span class="o">/</span><span class="mi">30</span><span class="o">/</span><span class="mi">2021</span> <span class="mi">10</span><span class="p">:</span><span class="mi">30</span> <span class="mf">55.000</span><span class="n">s</span>
<span class="n">NotAfter</span><span class="p">:</span> <span class="mi">3</span><span class="o">/</span><span class="mi">30</span><span class="o">/</span><span class="mi">2027</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span> <span class="mf">55.000</span><span class="n">s</span>
<span class="n">Thumbprint</span><span class="p">:</span> <span class="mi">8</span><span class="n">d79139f90b9fa47200eedbc8c29039869cc4adc</span>
<span class="n">Microsoft</span> <span class="n">Strong</span> <span class="n">Cryptographic</span> <span class="n">Provider</span>
<span class="n">c387aac7266d5db5d81da8a6aa21c703_163d773d</span><span class="o">-</span><span class="n">a567</span><span class="o">-</span><span class="mi">4430</span><span class="o">-</span><span class="n">aabf</span><span class="o">-</span><span class="mi">893</span><span class="n">dc207fa3d</span>

<span class="n">CertReq</span><span class="p">:</span> <span class="n">Certificate</span> <span class="n">Created</span> <span class="ow">and</span> <span class="n">Installed</span>
</pre></div>
</div>
</li>
<li><p>Validate the Platform Key certificate has been generated correctly:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">C</span><span class="p">:</span>\\<span class="n">PKtest</span><span class="o">&gt;</span> <span class="n">certutil</span> <span class="o">-</span><span class="n">store</span> <span class="o">-</span><span class="n">v</span> <span class="n">my</span> <span class="s2">&quot;3f675d4b64156f9c48ccf30793121147&quot;</span>
<span class="n">my</span> <span class="s2">&quot;Personal&quot;</span>
<span class="o">================</span> <span class="n">Certificate</span> <span class="mi">0</span> <span class="o">================</span>
<span class="n">X509</span> <span class="n">Certificate</span><span class="p">:</span>
<span class="n">Version</span><span class="p">:</span> <span class="mi">3</span>
<span class="n">Serial</span> <span class="n">Number</span><span class="p">:</span> <span class="mi">3</span><span class="n">f675d4b64156f9c48ccf30793121147</span>
<span class="n">Signature</span> <span class="n">Algorithm</span><span class="p">:</span>
    <span class="n">Algorithm</span> <span class="n">ObjectId</span><span class="p">:</span> <span class="mf">1.2.840.113549.1.1.11</span> <span class="n">sha256RSA</span>
    <span class="n">Algorithm</span> <span class="n">Parameters</span><span class="p">:</span>
    <span class="mi">05</span> <span class="mi">00</span>
<span class="n">Issuer</span><span class="p">:</span>
    <span class="n">CN</span><span class="o">=</span><span class="n">Intel</span> <span class="n">Platform</span> <span class="n">Key</span>
    <span class="n">O</span><span class="o">=</span><span class="n">Intel</span>
    <span class="n">L</span><span class="o">=</span><span class="n">Shanghai</span>
    <span class="n">S</span><span class="o">=</span><span class="n">Shanghai</span>
    <span class="n">C</span><span class="o">=</span><span class="n">CN</span>
    <span class="n">Name</span> <span class="n">Hash</span><span class="p">(</span><span class="n">sha1</span><span class="p">):</span> <span class="mi">732312795479</span><span class="n">b01208e0ade51c695eddd8f2b2d7</span>
    <span class="n">Name</span> <span class="n">Hash</span><span class="p">(</span><span class="n">md5</span><span class="p">):</span> <span class="mi">9264</span><span class="n">adf01062b20e8fe4351369c55cc4</span>

 <span class="n">NotBefore</span><span class="p">:</span> <span class="mi">6</span><span class="o">/</span><span class="mi">26</span><span class="o">/</span><span class="mi">2019</span> <span class="mi">10</span><span class="p">:</span><span class="mi">40</span> <span class="n">AM</span>
 <span class="n">NotAfter</span><span class="p">:</span> <span class="mi">6</span><span class="o">/</span><span class="mi">26</span><span class="o">/</span><span class="mi">2025</span> <span class="mi">10</span><span class="p">:</span><span class="mi">50</span> <span class="n">AM</span>

<span class="n">Subject</span><span class="p">:</span>
    <span class="n">CN</span><span class="o">=</span><span class="n">Intel</span> <span class="n">Platform</span> <span class="n">Key</span>
    <span class="n">O</span><span class="o">=</span><span class="n">Intel</span>
    <span class="n">L</span><span class="o">=</span><span class="n">Shanghai</span>
    <span class="n">S</span><span class="o">=</span><span class="n">Shanghai</span>
    <span class="n">C</span><span class="o">=</span><span class="n">CN</span>
    <span class="n">Name</span> <span class="n">Hash</span><span class="p">(</span><span class="n">sha1</span><span class="p">):</span> <span class="mi">732312795479</span><span class="n">b01208e0ade51c695eddd8f2b2d7</span>
    <span class="n">Name</span> <span class="n">Hash</span><span class="p">(</span><span class="n">md5</span><span class="p">):</span> <span class="mi">9264</span><span class="n">adf01062b20e8fe4351369c55cc4</span>

<span class="n">Public</span> <span class="n">Key</span> <span class="n">Algorithm</span><span class="p">:</span>
    <span class="n">Algorithm</span> <span class="n">ObjectId</span><span class="p">:</span> <span class="mf">1.2.840.113549.1.1.1</span> <span class="n">RSA</span>
    <span class="n">Algorithm</span> <span class="n">Parameters</span><span class="p">:</span>
    <span class="mi">05</span> <span class="mi">00</span>
<span class="n">Public</span> <span class="n">Key</span> <span class="n">Length</span><span class="p">:</span> <span class="mi">2048</span> <span class="n">bits</span>
<span class="n">Public</span> <span class="n">Key</span><span class="p">:</span> <span class="n">UnusedBits</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="mi">0000</span> <span class="mi">30</span> <span class="mi">82</span> <span class="mi">01</span> <span class="mi">0</span><span class="n">a</span> <span class="mi">02</span> <span class="mi">82</span> <span class="mi">01</span> <span class="mi">01</span> <span class="mi">00</span> <span class="n">b9</span> <span class="mi">72</span> <span class="n">bb</span> <span class="n">ae</span> <span class="n">ff</span> <span class="mi">44</span> <span class="mi">55</span>
    <span class="mi">0010</span> <span class="mi">01</span> <span class="n">a5</span> <span class="mi">53</span> <span class="mi">6</span><span class="n">c</span> <span class="n">bd</span> <span class="n">b1</span> <span class="mi">6</span><span class="n">e</span> <span class="n">b1</span> <span class="mi">32</span> <span class="mi">4</span><span class="n">a</span> <span class="n">e5</span> <span class="mi">07</span> <span class="mi">04</span> <span class="n">f9</span> <span class="mi">97</span> <span class="mi">41</span>
    <span class="mi">0020</span> <span class="mi">49</span> <span class="n">a5</span> <span class="mi">95</span> <span class="n">c9</span> <span class="mi">77</span> <span class="n">b7</span> <span class="n">db</span> <span class="n">c0</span> <span class="n">b0</span> <span class="mi">0</span><span class="n">d</span> <span class="mi">51</span> <span class="mi">6</span><span class="n">a</span> <span class="mi">17</span> <span class="n">d4</span> <span class="n">a1</span> <span class="mi">91</span>
    <span class="mi">0030</span> <span class="mi">21</span> <span class="mi">8</span><span class="n">b</span> <span class="mi">1</span><span class="n">c</span> <span class="mi">14</span> <span class="mi">8</span><span class="n">a</span> <span class="mi">29</span> <span class="n">f2</span> <span class="mi">45</span> <span class="mi">78</span> <span class="n">c0</span> <span class="n">d3</span> <span class="n">d3</span> <span class="mi">99</span> <span class="mi">19</span> <span class="n">b6</span> <span class="n">de</span>
    <span class="mi">0040</span> <span class="mi">8</span><span class="n">b</span> <span class="n">cd</span> <span class="mi">43</span> <span class="mi">05</span> <span class="mi">61</span> <span class="mi">95</span> <span class="n">d1</span> <span class="n">c1</span> <span class="mi">84</span> <span class="mi">97</span> <span class="mi">83</span> <span class="n">c7</span> <span class="n">ce</span> <span class="mi">93</span> <span class="n">c7</span> <span class="mi">9</span><span class="n">a</span>
    <span class="mi">0050</span> <span class="mi">90</span> <span class="mi">37</span> <span class="n">ba</span> <span class="mi">9</span><span class="n">d</span> <span class="mi">7</span><span class="n">a</span> <span class="mi">2</span><span class="n">a</span> <span class="n">d1</span> <span class="mi">6</span><span class="n">b</span> <span class="n">ad</span> <span class="n">f6</span> <span class="n">ba</span> <span class="n">da</span> <span class="mi">6</span><span class="n">d</span> <span class="mi">18</span> <span class="mi">1</span><span class="n">a</span> <span class="n">ae</span>
    <span class="mi">0060</span> <span class="n">ec</span> <span class="mi">16</span> <span class="mi">80</span> <span class="n">fe</span> <span class="mi">29</span> <span class="mi">4</span><span class="n">e</span> <span class="mi">25</span> <span class="mi">8</span><span class="n">a</span> <span class="mi">2</span><span class="n">d</span> <span class="mi">22</span> <span class="n">bd</span> <span class="n">fb</span> <span class="mi">25</span> <span class="mi">02</span> <span class="n">f3</span> <span class="n">f3</span>
    <span class="mi">0070</span> <span class="n">ad</span> <span class="n">ae</span> <span class="mi">0</span><span class="n">e</span> <span class="n">df</span> <span class="mi">37</span> <span class="mi">4</span><span class="n">b</span> <span class="mi">9</span><span class="n">d</span> <span class="n">e0</span> <span class="n">b1</span> <span class="n">cb</span> <span class="n">b8</span> <span class="mi">40</span> <span class="n">d2</span> <span class="n">ff</span> <span class="n">c8</span> <span class="n">bd</span>
    <span class="mi">0080</span> <span class="mi">6</span><span class="n">b</span> <span class="n">bc</span> <span class="mi">9</span><span class="n">f</span> <span class="mi">61</span> <span class="mi">68</span> <span class="n">be</span> <span class="n">d4</span> <span class="mi">33</span> <span class="mi">61</span> <span class="mi">01</span> <span class="n">b7</span> <span class="n">b9</span> <span class="n">ef</span> <span class="n">f3</span> <span class="mi">32</span> <span class="n">ee</span>
    <span class="mi">0090</span> <span class="mi">7</span><span class="n">e</span> <span class="n">b4</span> <span class="mi">24</span> <span class="n">c3</span> <span class="mi">68</span> <span class="mi">9</span><span class="n">c</span> <span class="mi">19</span> <span class="mi">85</span> <span class="mi">4</span><span class="n">a</span> <span class="n">d6</span> <span class="mi">7</span><span class="n">f</span> <span class="n">e6</span> <span class="mi">8</span><span class="n">b</span> <span class="mi">28</span> <span class="mi">81</span> <span class="mi">5</span><span class="n">f</span>
    <span class="mi">00</span><span class="n">a0</span> <span class="mi">7</span><span class="n">a</span> <span class="mi">41</span> <span class="n">fa</span> <span class="n">f7</span> <span class="mi">0</span><span class="n">c</span> <span class="mi">21</span> <span class="n">c2</span> <span class="mi">10</span> <span class="mi">1</span><span class="n">f</span> <span class="n">df</span> <span class="n">b2</span> <span class="mi">89</span> <span class="mi">9</span><span class="n">d</span> <span class="mi">2</span><span class="n">d</span> <span class="mi">1</span><span class="n">a</span> <span class="n">b8</span>
    <span class="mi">00</span><span class="n">b0</span> <span class="n">ac</span> <span class="mi">9</span><span class="n">f</span> <span class="mi">09</span> <span class="mi">11</span> <span class="n">c9</span> <span class="mi">85</span> <span class="mi">1</span><span class="n">d</span> <span class="n">fb</span> <span class="mi">96</span> <span class="mi">00</span> <span class="mi">55</span> <span class="mi">95</span> <span class="mi">73</span> <span class="n">d9</span> <span class="n">d5</span> <span class="n">ae</span>
    <span class="mi">00</span><span class="n">c0</span> <span class="n">c2</span> <span class="mi">9</span><span class="n">e</span> <span class="mi">10</span> <span class="mi">8</span><span class="n">b</span> <span class="n">c8</span> <span class="mi">7</span><span class="n">d</span> <span class="n">ec</span> <span class="mi">6</span><span class="n">c</span> <span class="n">d9</span> <span class="n">b1</span> <span class="mi">15</span> <span class="mi">80</span> <span class="mi">50</span> <span class="mi">3</span><span class="n">d</span> <span class="mi">4</span><span class="n">e</span> <span class="mi">25</span>
    <span class="mi">00</span><span class="n">d0</span> <span class="n">cb</span> <span class="mi">8</span><span class="n">a</span> <span class="n">d7</span> <span class="n">fc</span> <span class="mi">22</span> <span class="mi">27</span> <span class="n">a7</span> <span class="n">be</span> <span class="mi">71</span> <span class="mi">15</span> <span class="mi">22</span> <span class="mi">86</span> <span class="mi">0</span><span class="n">e</span> <span class="mi">88</span> <span class="n">e9</span> <span class="n">c0</span>
    <span class="mf">00e0</span> <span class="n">b6</span> <span class="n">af</span> <span class="n">e6</span> <span class="mi">9</span><span class="n">b</span> <span class="mi">56</span> <span class="mi">0</span><span class="n">a</span> <span class="mi">99</span> <span class="mi">6</span><span class="n">f</span> <span class="mi">88</span> <span class="n">c7</span> <span class="mi">4</span><span class="n">c</span> <span class="n">e3</span> <span class="mi">15</span> <span class="n">dc</span> <span class="mi">6</span><span class="n">f</span> <span class="mi">03</span>
    <span class="mi">00</span><span class="n">f0</span> <span class="mi">8</span><span class="n">a</span> <span class="n">b3</span> <span class="mi">21</span> <span class="n">cc</span> <span class="mi">09</span> <span class="n">df</span> <span class="mi">8</span><span class="n">c</span> <span class="mi">3</span><span class="n">b</span> <span class="n">aa</span> <span class="n">c0</span> <span class="mi">2</span><span class="n">d</span> <span class="mi">31</span> <span class="mi">0</span><span class="n">b</span> <span class="mi">39</span> <span class="mi">01</span> <span class="mi">13</span>
    <span class="mi">0100</span> <span class="mi">29</span> <span class="n">e4</span> <span class="n">f4</span> <span class="mi">85</span> <span class="mi">8</span><span class="n">e</span> <span class="n">f7</span> <span class="mi">69</span> <span class="n">db</span> <span class="mi">05</span> <span class="mi">02</span> <span class="mi">03</span> <span class="mi">01</span> <span class="mi">00</span> <span class="mi">01</span>
<span class="n">Certificate</span> <span class="n">Extensions</span><span class="p">:</span> <span class="mi">2</span>
    <span class="mf">2.5.29.15</span><span class="p">:</span> <span class="n">Flags</span> <span class="o">=</span> <span class="mi">1</span><span class="p">(</span><span class="n">Critical</span><span class="p">),</span> <span class="n">Length</span> <span class="o">=</span> <span class="mi">4</span>
    <span class="n">Key</span> <span class="n">Usage</span>
        <span class="n">Digital</span> <span class="n">Signature</span><span class="p">,</span> <span class="n">Non</span><span class="o">-</span><span class="n">Repudiation</span><span class="p">,</span> <span class="n">Key</span> <span class="n">Encipherment</span><span class="p">,</span> <span class="n">Data</span> <span class="n">Encipherment</span> <span class="p">(</span><span class="n">f0</span><span class="p">)</span>

    <span class="mf">2.5.29.14</span><span class="p">:</span> <span class="n">Flags</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">Length</span> <span class="o">=</span> <span class="mi">16</span>
    <span class="n">Subject</span> <span class="n">Key</span> <span class="n">Identifier</span>
        <span class="mi">29</span><span class="n">c42c8b73d48fb46118895ae59806eac7bf0098</span>

<span class="n">Signature</span> <span class="n">Algorithm</span><span class="p">:</span>
    <span class="n">Algorithm</span> <span class="n">ObjectId</span><span class="p">:</span> <span class="mf">1.2.840.113549.1.1.11</span> <span class="n">sha256RSA</span>
    <span class="n">Algorithm</span> <span class="n">Parameters</span><span class="p">:</span>
    <span class="mi">05</span> <span class="mi">00</span>

<span class="n">Signature</span><span class="p">:</span> <span class="n">UnusedBits</span><span class="o">=</span><span class="mi">0</span>
    <span class="mi">0000</span> <span class="n">d4</span> <span class="mi">89</span> <span class="mi">92</span> <span class="n">e6</span> <span class="n">e1</span> <span class="n">ef</span> <span class="mi">7</span><span class="n">e</span> <span class="n">ce</span> <span class="n">d3</span> <span class="n">c6</span> <span class="n">c2</span> <span class="n">b2</span> <span class="mi">15</span> <span class="mi">63</span> <span class="mi">5</span><span class="n">c</span> <span class="mi">68</span>
    <span class="mi">0010</span> <span class="n">ea</span> <span class="mi">16</span> <span class="mi">13</span> <span class="mi">7</span><span class="n">e</span> <span class="mi">90</span> <span class="mi">81</span> <span class="n">e3</span> <span class="mi">75</span> <span class="mi">64</span> <span class="mi">75</span> <span class="n">da</span> <span class="n">ac</span> <span class="mi">85</span> <span class="n">fc</span> <span class="n">c6</span> <span class="mi">3</span><span class="n">a</span>
    <span class="mi">0020</span> <span class="mi">65</span> <span class="mi">3</span><span class="n">b</span> <span class="mi">60</span> <span class="mi">1</span><span class="n">e</span> <span class="mi">81</span> <span class="mi">2</span><span class="n">d</span> <span class="mi">20</span> <span class="mi">58</span> <span class="n">ec</span> <span class="n">b3</span> <span class="mi">07</span> <span class="mi">3</span><span class="n">c</span> <span class="n">a3</span> <span class="n">a8</span> <span class="mi">8</span><span class="n">a</span> <span class="mi">57</span>
    <span class="mi">0030</span> <span class="n">cf</span> <span class="mi">33</span> <span class="n">a2</span> <span class="mi">8</span><span class="n">c</span> <span class="mi">08</span> <span class="n">fe</span> <span class="mi">74</span> <span class="mi">2</span><span class="n">b</span> <span class="n">c5</span> <span class="n">d9</span> <span class="n">e7</span> <span class="n">f2</span> <span class="n">f7</span> <span class="mi">69</span> <span class="mi">8</span><span class="n">d</span> <span class="n">ca</span>
    <span class="mi">0040</span> <span class="mi">68</span> <span class="mi">81</span> <span class="mi">33</span> <span class="mi">3</span><span class="n">d</span> <span class="mi">5</span><span class="n">c</span> <span class="mi">25</span> <span class="mi">63</span> <span class="mi">60</span> <span class="mi">17</span> <span class="mi">51</span> <span class="mi">4</span><span class="n">e</span> <span class="mi">0</span><span class="n">c</span> <span class="mi">1</span><span class="n">d</span> <span class="n">bd</span> <span class="n">de</span> <span class="mi">68</span>
    <span class="mi">0050</span> <span class="mi">07</span> <span class="mi">52</span> <span class="n">c6</span> <span class="mi">50</span> <span class="n">da</span> <span class="n">d9</span> <span class="mi">5</span><span class="n">e</span> <span class="mi">5</span><span class="n">b</span> <span class="n">bd</span> <span class="mi">4</span><span class="n">f</span> <span class="mi">33</span> <span class="mi">84</span> <span class="mi">0</span><span class="n">c</span> <span class="n">f8</span> <span class="n">ea</span> <span class="mi">61</span>
    <span class="mi">0060</span> <span class="n">f9</span> <span class="n">c3</span> <span class="mi">00</span> <span class="n">db</span> <span class="mi">78</span> <span class="n">f6</span> <span class="n">b2</span> <span class="mi">4</span><span class="n">f</span> <span class="mi">4</span><span class="n">e</span> <span class="mi">4</span><span class="n">b</span> <span class="mi">8</span><span class="n">d</span> <span class="n">cf</span> <span class="n">c9</span> <span class="mi">0</span><span class="n">f</span> <span class="n">d6</span> <span class="mi">8</span><span class="n">a</span>
    <span class="mi">0070</span> <span class="mi">5</span><span class="n">c</span> <span class="n">f2</span> <span class="mi">8</span><span class="n">b</span> <span class="mi">87</span> <span class="mi">0</span><span class="n">d</span> <span class="n">a5</span> <span class="n">a5</span> <span class="mi">5</span><span class="n">e</span> <span class="n">ab</span> <span class="n">ce</span> <span class="n">ac</span> <span class="n">a4</span> <span class="n">ff</span> <span class="n">dd</span> <span class="n">d2</span> <span class="n">aa</span>
    <span class="mi">0080</span> <span class="mi">4</span><span class="n">c</span> <span class="mi">22</span> <span class="mi">8</span><span class="n">a</span> <span class="n">c2</span> <span class="mi">3</span><span class="n">e</span> <span class="mi">23</span> <span class="mi">7</span><span class="n">c</span> <span class="n">de</span> <span class="mi">4</span><span class="n">e</span> <span class="mi">1</span><span class="n">c</span> <span class="mi">18</span> <span class="n">f5</span> <span class="n">f9</span> <span class="n">a3</span> <span class="n">c1</span> <span class="mi">4</span><span class="n">e</span>
    <span class="mi">0090</span> <span class="n">b5</span> <span class="mi">1</span><span class="n">e</span> <span class="mi">9</span><span class="n">a</span> <span class="n">af</span> <span class="mi">92</span> <span class="mi">0</span><span class="n">e</span> <span class="mi">20</span> <span class="mi">0</span><span class="n">e</span> <span class="mi">17</span> <span class="mi">82</span> <span class="mi">2</span><span class="n">f</span> <span class="mi">0</span><span class="n">c</span> <span class="n">b4</span> <span class="n">c4</span> <span class="n">a3</span> <span class="n">f1</span>
    <span class="mi">00</span><span class="n">a0</span> <span class="mi">32</span> <span class="mi">5</span><span class="n">a</span> <span class="mi">0</span><span class="n">f</span> <span class="n">e8</span> <span class="mi">63</span> <span class="mi">3</span><span class="n">e</span> <span class="mi">5</span><span class="n">e</span> <span class="mi">36</span> <span class="n">a2</span> <span class="mi">8</span><span class="n">c</span> <span class="n">ea</span> <span class="n">de</span> <span class="mi">02</span> <span class="mi">78</span> <span class="mi">58</span> <span class="n">b8</span>
    <span class="mi">00</span><span class="n">b0</span> <span class="mi">5</span><span class="n">a</span> <span class="mi">0</span><span class="n">d</span> <span class="n">d3</span> <span class="mi">82</span> <span class="n">e4</span> <span class="n">b1</span> <span class="n">a6</span> <span class="mi">72</span> <span class="mi">9</span><span class="n">a</span> <span class="n">dc</span> <span class="mi">4</span><span class="n">a</span> <span class="n">dc</span> <span class="mi">5</span><span class="n">b</span> <span class="mi">93</span> <span class="n">de</span> <span class="mi">3</span><span class="n">c</span>
    <span class="mi">00</span><span class="n">c0</span> <span class="mi">2</span><span class="n">c</span> <span class="n">ea</span> <span class="n">b0</span> <span class="mi">8</span><span class="n">d</span> <span class="n">a5</span> <span class="mi">6</span><span class="n">e</span> <span class="mi">5</span><span class="n">c</span> <span class="n">d6</span> <span class="n">c7</span> <span class="n">f8</span> <span class="mi">78</span> <span class="n">ef</span> <span class="mi">56</span> <span class="mi">16</span> <span class="n">ed</span> <span class="mi">7</span><span class="n">f</span>
    <span class="mi">00</span><span class="n">d0</span> <span class="mi">1</span><span class="n">e</span> <span class="n">a5</span> <span class="mi">5</span><span class="n">b</span> <span class="n">a2</span> <span class="mi">35</span> <span class="mi">87</span> <span class="mi">41</span> <span class="mi">4</span><span class="n">d</span> <span class="mi">5</span><span class="n">c</span> <span class="mi">9</span><span class="n">d</span> <span class="mi">34</span> <span class="n">c9</span> <span class="mi">5</span><span class="n">b</span> <span class="mi">82</span> <span class="mi">68</span> <span class="mi">94</span>
    <span class="mf">00e0</span> <span class="mi">8</span><span class="n">a</span> <span class="mi">52</span> <span class="mi">9</span><span class="n">c</span> <span class="mi">8</span><span class="n">e</span> <span class="mi">80</span> <span class="mi">50</span> <span class="mi">0</span><span class="n">d</span> <span class="n">d7</span> <span class="mi">10</span> <span class="mi">34</span> <span class="n">cb</span> <span class="mi">9</span><span class="n">c</span> <span class="mi">96</span> <span class="mi">8</span><span class="n">a</span> <span class="n">b3</span> <span class="mi">5</span><span class="n">e</span>
    <span class="mi">00</span><span class="n">f0</span> <span class="mi">9</span><span class="n">c</span> <span class="n">bb</span> <span class="n">bd</span> <span class="mi">07</span> <span class="n">b5</span> <span class="mi">18</span> <span class="n">b0</span> <span class="n">ea</span> <span class="n">d2</span> <span class="mi">93</span> <span class="mi">8</span><span class="n">f</span> <span class="mi">79</span> <span class="n">e9</span> <span class="n">dd</span> <span class="mi">32</span> <span class="mi">7</span><span class="n">a</span>
<span class="n">Signature</span> <span class="n">matches</span> <span class="n">Public</span> <span class="n">Key</span>
<span class="n">Root</span> <span class="n">Certificate</span><span class="p">:</span> <span class="n">Subject</span> <span class="n">matches</span> <span class="n">Issuer</span>
<span class="n">Key</span> <span class="n">Id</span> <span class="n">Hash</span><span class="p">(</span><span class="n">rfc</span><span class="o">-</span><span class="n">sha1</span><span class="p">):</span> <span class="mi">29</span><span class="n">c42c8b73d48fb46118895ae59806eac7bf0098</span>
<span class="n">Key</span> <span class="n">Id</span> <span class="n">Hash</span><span class="p">(</span><span class="n">sha1</span><span class="p">):</span> <span class="mf">2e442</span><span class="n">e6469555a714423002b2e0748b373a27952</span>
<span class="n">Key</span> <span class="n">Id</span> <span class="n">Hash</span><span class="p">(</span><span class="n">bcrypt</span><span class="o">-</span><span class="n">sha1</span><span class="p">):</span> <span class="mi">66</span><span class="n">f3c2ecf18079b65d6de0b85be1786749a9eb75</span>
<span class="n">Key</span> <span class="n">Id</span> <span class="n">Hash</span><span class="p">(</span><span class="n">bcrypt</span><span class="o">-</span><span class="n">sha256</span><span class="p">):</span> <span class="n">edd9c90796d56e97db92f506953da26c44d7e8640875c3b60e5788f4cd5f7058</span>
<span class="n">Key</span> <span class="n">Id</span> <span class="n">Hash</span><span class="p">(</span><span class="n">md5</span><span class="p">):</span> <span class="mf">99e508</span><span class="n">cd7c5c5e2077648312097c18ab</span>
<span class="n">Key</span> <span class="n">Id</span> <span class="n">Hash</span><span class="p">(</span><span class="n">sha256</span><span class="p">):</span> <span class="mi">3401</span><span class="n">abc0a80dc1731990b0a99a1b5c7e1e60e107a667b295ced40a2056e43ce4</span>
<span class="n">Key</span> <span class="n">Id</span> <span class="n">Hash</span><span class="p">(</span><span class="n">pin</span><span class="o">-</span><span class="n">sha256</span><span class="p">):</span> <span class="mi">0</span><span class="n">wf9owhuRaJxiwsN4Mt8zAaXgTrp3dMJFopvr</span><span class="o">+</span><span class="n">oB1wA</span><span class="o">=</span>
<span class="n">Key</span> <span class="n">Id</span> <span class="n">Hash</span><span class="p">(</span><span class="n">pin</span><span class="o">-</span><span class="n">sha256</span><span class="o">-</span><span class="nb">hex</span><span class="p">):</span> <span class="n">d307fda3086e45a2718b0b0de0cb7ccc0697813ae9ddd309168a6fafea01d700</span>
<span class="n">Cert</span> <span class="n">Hash</span><span class="p">(</span><span class="n">md5</span><span class="p">):</span> <span class="n">e95f4760524981cf90bc3198e3075f44</span>
<span class="n">Cert</span> <span class="n">Hash</span><span class="p">(</span><span class="n">sha1</span><span class="p">):</span> <span class="n">ff2771bd5bd1f7086ab96fb9532b594ed8619c3b</span>
<span class="n">Cert</span> <span class="n">Hash</span><span class="p">(</span><span class="n">sha256</span><span class="p">):</span> <span class="mi">3</span><span class="n">abc3ab573d67e1fb491b2fd7e4ae0e5d9941ac7d55ee085c1d73d684891001a</span>
<span class="n">Signature</span> <span class="n">Hash</span><span class="p">:</span> <span class="mi">4106</span><span class="n">dbf78737c3b54009b231eb9fe00e57a1ac6c94e0d5046e9bc7a62febde85</span>

  <span class="n">CERT_REQUEST_ORIGINATOR_PROP_ID</span><span class="p">(</span><span class="mi">71</span><span class="p">):</span>
    <span class="n">xyzzy</span><span class="o">.</span><span class="n">ccr</span><span class="o">.</span><span class="n">corp</span><span class="o">.</span><span class="n">intel</span><span class="o">.</span><span class="n">com</span>

  <span class="n">CERT_KEY_PROV_INFO_PROP_ID</span><span class="p">(</span><span class="mi">2</span><span class="p">):</span>
    <span class="n">Key</span> <span class="n">Container</span> <span class="o">=</span> <span class="mi">3</span><span class="n">d40ebea7d109ee93b238b96721f0e6d_4be58f30</span><span class="o">-</span><span class="mi">7127</span><span class="o">-</span><span class="mi">42</span><span class="n">f5</span><span class="o">-</span><span class="mi">9</span><span class="n">b76</span><span class="o">-</span><span class="n">f47187495247</span>
    <span class="n">Simple</span> <span class="n">container</span> <span class="n">name</span><span class="p">:</span> <span class="p">{</span><span class="n">EA75381E</span><span class="o">-</span><span class="mi">6</span><span class="n">D9B</span><span class="o">-</span><span class="mi">4</span><span class="n">BDC</span><span class="o">-</span><span class="n">B6C7</span><span class="o">-</span><span class="mi">5144</span><span class="n">C96507DD</span><span class="p">}</span>
    <span class="n">Provider</span> <span class="o">=</span> <span class="n">Microsoft</span> <span class="n">Strong</span> <span class="n">Cryptographic</span> <span class="n">Provider</span>
    <span class="n">ProviderType</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">Flags</span> <span class="o">=</span> <span class="mi">20</span> <span class="p">(</span><span class="mi">32</span><span class="p">)</span>

  <span class="n">CRYPT_MACHINE_KEYSET</span> <span class="o">--</span> <span class="mi">20</span> <span class="p">(</span><span class="mi">32</span><span class="p">)</span>
    <span class="n">KeySpec</span> <span class="o">=</span> <span class="mi">2</span> <span class="o">--</span> <span class="n">AT_SIGNATURE</span>

  <span class="n">CERT_SUBJECT_PUB_KEY_BIT_LENGTH_PROP_ID</span><span class="p">(</span><span class="mi">92</span><span class="p">):</span>
    <span class="mh">0x00000800</span> <span class="p">(</span><span class="mi">2048</span><span class="p">)</span>

  <span class="n">CERT_SHA1_HASH_PROP_ID</span><span class="p">(</span><span class="mi">3</span><span class="p">):</span>
    <span class="n">ff2771bd5bd1f7086ab96fb9532b594ed8619c3b</span>

  <span class="n">CERT_SUBJECT_PUBLIC_KEY_MD5_HASH_PROP_ID</span><span class="p">(</span><span class="mi">25</span><span class="p">):</span>
    <span class="mf">99e508</span><span class="n">cd7c5c5e2077648312097c18ab</span>

  <span class="n">CERT_KEY_IDENTIFIER_PROP_ID</span><span class="p">(</span><span class="mi">20</span><span class="p">):</span>
    <span class="mi">29</span><span class="n">c42c8b73d48fb46118895ae59806eac7bf0098</span>

  <span class="n">CERT_SIGNATURE_HASH_PROP_ID</span><span class="p">(</span><span class="mi">15</span><span class="p">)</span> <span class="n">disallowedHash</span><span class="p">:</span>
    <span class="mi">4106</span><span class="n">dbf78737c3b54009b231eb9fe00e57a1ac6c94e0d5046e9bc7a62febde85</span>

  <span class="n">CERT_MD5_HASH_PROP_ID</span><span class="p">(</span><span class="mi">4</span><span class="p">):</span>
    <span class="n">e95f4760524981cf90bc3198e3075f44</span>

  <span class="n">CERT_ACCESS_STATE_PROP_ID</span><span class="p">(</span><span class="mi">14</span><span class="p">):</span>
    <span class="n">AccessState</span> <span class="o">=</span> <span class="mi">6</span>

  <span class="n">CERT_ACCESS_STATE_SYSTEM_STORE_FLAG</span> <span class="o">--</span> <span class="mi">2</span>

  <span class="n">CERT_ACCESS_STATE_LM_SYSTEM_STORE_FLAG</span> <span class="o">--</span> <span class="mi">4</span>
    <span class="n">Provider</span> <span class="o">=</span> <span class="n">Microsoft</span> <span class="n">Strong</span> <span class="n">Cryptographic</span> <span class="n">Provider</span>
    <span class="n">ProviderType</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="n">Simple</span> <span class="n">container</span> <span class="n">name</span><span class="p">:</span> <span class="p">{</span><span class="n">EA75381E</span><span class="o">-</span><span class="mi">6</span><span class="n">D9B</span><span class="o">-</span><span class="mi">4</span><span class="n">BDC</span><span class="o">-</span><span class="n">B6C7</span><span class="o">-</span><span class="mi">5144</span><span class="n">C96507DD</span><span class="p">}</span>

  <span class="n">RSA</span>

  <span class="n">PP_KEYSTORAGE</span> <span class="o">=</span> <span class="mi">1</span>

  <span class="n">CRYPT_SEC_DESCR</span> <span class="o">--</span> <span class="mi">1</span>

  <span class="n">KP_PERMISSIONS</span> <span class="o">=</span> <span class="mi">3</span><span class="n">b</span> <span class="p">(</span><span class="mi">59</span><span class="p">)</span>

  <span class="n">CRYPT_ENCRYPT</span> <span class="o">--</span> <span class="mi">1</span>

  <span class="n">CRYPT_DECRYPT</span> <span class="o">--</span> <span class="mi">2</span>

  <span class="n">CRYPT_READ</span> <span class="o">--</span> <span class="mi">8</span>

  <span class="n">CRYPT_WRITE</span> <span class="o">--</span> <span class="mi">10</span> <span class="p">(</span><span class="mi">16</span><span class="p">)</span>

  <span class="n">CRYPT_MAC</span> <span class="o">--</span> <span class="mi">20</span> <span class="p">(</span><span class="mi">32</span><span class="p">)</span>

  <span class="n">D</span><span class="p">:</span><span class="n">PAI</span><span class="p">(</span><span class="n">A</span><span class="p">;;</span><span class="n">GAGR</span><span class="p">;;;</span><span class="n">BA</span><span class="p">)(</span><span class="n">A</span><span class="p">;;</span><span class="n">GAGR</span><span class="p">;;;</span><span class="n">SY</span><span class="p">)</span>

    <span class="n">Allow</span> <span class="n">Full</span> <span class="n">Control</span> <span class="n">BUILTIN</span>\\<span class="n">Administrators</span>
    <span class="n">Allow</span> <span class="n">Full</span> <span class="n">Control</span> <span class="n">NT</span> <span class="n">AUTHORITY</span>\\<span class="n">SYSTEM</span>

<span class="n">Private</span> <span class="n">key</span> <span class="ow">is</span> <span class="n">NOT</span> <span class="n">exportable</span>
<span class="n">Signature</span> <span class="n">test</span> <span class="n">passed</span>
<span class="n">CertUtil</span><span class="p">:</span> <span class="o">-</span><span class="n">store</span> <span class="n">command</span> <span class="n">completed</span> <span class="n">successfully</span><span class="o">.</span>
</pre></div>
</div>
</li>
</ul>
</div>
</div>
<div class="section" id="download-kek-and-db-from-microsoft">
<h2>Download KEK and DB From Microsoft<a class="headerlink" href="#download-kek-and-db-from-microsoft" title="Permalink to this headline">¶</a></h2>
<dl>
<dt>KEK (Key Exchange Key):</dt><dd><p><a class="reference external" href="https://go.microsoft.com/fwlink/p/?linkid=321185">Microsoft Corporation KEK CA 2011</a>:
allows updates to DB and DBX.</p>
</dd>
<dt>DB (Allowed Signature database):</dt><dd><p><a class="reference external" href="https://go.microsoft.com/fwlink/?LinkId=321192">Microsoft Windows Production CA 2011</a>:
This CA in the Signature Database (DB) allows Windows to boot.</p>
<p><a class="reference external" href="https://go.microsoft.com/fwlink/p/?LinkID=321194">Microsoft Corporation UEFI CA 2011</a>:
Microsoft signer for third party UEFI binaries via DevCenter program.</p>
</dd>
</dl>
</div>
<div class="section" id="compile-ovmf-with-secure-boot-support">
<h2>Compile OVMF With Secure Boot Support<a class="headerlink" href="#compile-ovmf-with-secure-boot-support" title="Permalink to this headline">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>git clone https://github.com/projectacrn/acrn-edk2.git

<span class="nb">cd</span> acrn-edk2

git checkout -b ovmf b64fe247c434e2a4228b9804c522575804550f82

git submodule update --init CryptoPkg/Library/OpensslLib/openssl

<span class="nb">source</span> edksetup.sh
make -C BaseTools
</pre></div>
</div>
<p>Edit the <code class="docutils literal notranslate"><span class="pre">Conf/target.txt</span></code> file and set these values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ACTIVE_PLATFORM</span> <span class="o">=</span> <span class="n">OvmfPkg</span><span class="o">/</span><span class="n">OvmfPkgX64</span><span class="o">.</span><span class="n">dsc</span>
<span class="n">TARGET_ARCH</span> <span class="o">=</span> <span class="n">X64</span>
<span class="n">TOOL_CHAIN_TAG</span> <span class="o">=</span> <span class="n">GCC5</span>
</pre></div>
</div>
<p>Then continue doing the build:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">build</span> <span class="o">-</span><span class="n">DFD_SIZE_2MB</span> <span class="o">-</span><span class="n">DDEBUG_ON_SERIAL_PORT</span><span class="o">=</span><span class="n">TRUE</span> <span class="o">-</span><span class="n">DSECURE_BOOT_ENABLE</span>
</pre></div>
</div>
<p>Notes:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">edksetup.sh</span></code>, this step is needed for compilation every time
a shell is created.</p></li>
<li><p>This will generate the <code class="docutils literal notranslate"><span class="pre">fw</span></code> section at
<code class="docutils literal notranslate"><span class="pre">Build/OvmfX64/DEBUG_GCC5/FV/OVMF_CODE.fd</span></code> or
<code class="docutils literal notranslate"><span class="pre">Build/OvmfX64/RELEASE_GCC5/FV/OVMF_CODE.fd</span></code></p>
<p>This will also generate an empty template VARS file at
<code class="docutils literal notranslate"><span class="pre">Build/OvmfX64/DEBUG_GCC5/FV/OVMF_VARS.fd</span></code> or
<code class="docutils literal notranslate"><span class="pre">Build/OvmfX64/RELEASE_GCC5/FV/OVMF_VARS.fd</span></code></p>
<p>Both <code class="docutils literal notranslate"><span class="pre">OVMF_CODE.fd</span></code> and <code class="docutils literal notranslate"><span class="pre">OVMF_VARS.fd</span></code> will be used later.</p>
</li>
<li><p>Make sure your GCC is 5.X. GCC 6 and above is NOT supported.</p></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="use-qemu-to-inject-secure-boot-keys-into-ovmf">
<span id="qemu-inject-boot-keys"></span><h2>Use QEMU to Inject Secure Boot Keys Into OVMF<a class="headerlink" href="#use-qemu-to-inject-secure-boot-keys-into-ovmf" title="Permalink to this headline">¶</a></h2>
<p>We follow the <a class="reference external" href="https://en.opensuse.org/openSUSE:UEFI_Secure_boot_using_qemu-kvm">openSUSE: UEFI Secure boot using qemu-kvm document</a>
to import PK, KEK, and DB into OVMF, Ubuntu 16.04 used.</p>
<ol class="arabic">
<li><p>Install KVM, QEMU</p></li>
<li><p>Prepare the environment</p>
<ol class="loweralpha">
<li><p>Create a OVMFKeys working directory:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">mkdir</span> <span class="n">OVMFKeys</span>
</pre></div>
</div>
</li>
<li><p>Copy the build out OVMF binary into OVMFKeys:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="n">edk2</span><span class="o">/</span><span class="n">Build</span><span class="o">/</span><span class="n">OvmfX64</span><span class="o">/</span><span class="n">DEBUG_GCC5</span><span class="o">/</span><span class="n">FV</span><span class="o">/</span><span class="n">OVMF_CODE</span><span class="o">.</span><span class="n">fd</span> <span class="n">OVMFKeys</span>
<span class="n">cp</span> <span class="n">edk2</span><span class="o">/</span><span class="n">Build</span><span class="o">/</span><span class="n">OvmfX64</span><span class="o">/</span><span class="n">DEBUG_GCC5</span><span class="o">/</span><span class="n">FV</span><span class="o">/</span><span class="n">OVMF_VARS</span><span class="o">.</span><span class="n">fd</span> <span class="n">OVMFKeys</span>
</pre></div>
</div>
</li>
<li><p>copy <code class="docutils literal notranslate"><span class="pre">OVMF_CODE_QEMU.fd</span></code> into OVMFKeys:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="n">OVMF_CODE_QEMU</span><span class="o">.</span><span class="n">fd</span> <span class="n">OVMFKeys</span>
</pre></div>
</div>
</li>
<li><p>Make a working directory for hda-contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">OVMFKeys</span>
<span class="n">mkdir</span> <span class="n">hda</span><span class="o">-</span><span class="n">contents</span>
</pre></div>
</div>
</li>
<li><p>Copy PK, KEK and DB into hda-contents:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cp</span> <span class="n">PKtestDER</span><span class="o">.</span><span class="n">cer</span> <span class="n">hda</span><span class="o">-</span><span class="n">contents</span>
<span class="n">cp</span> <span class="n">MicCorKEKCA2011_2011</span><span class="o">-</span><span class="mi">06</span><span class="o">-</span><span class="mf">24.</span><span class="n">crt</span> <span class="n">hda</span><span class="o">-</span><span class="n">contents</span>
<span class="n">cp</span> <span class="n">MicWinProPCA2011_2011</span><span class="o">-</span><span class="mi">10</span><span class="o">-</span><span class="mf">19.</span><span class="n">crt</span> <span class="n">hda</span><span class="o">-</span><span class="n">contents</span>
</pre></div>
</div>
</li>
</ol>
</li>
<li><p>Use QEMU to inject secure boot keys</p>
<ol class="loweralpha">
<li><p>Run qemu-system-x86_64 to launch virtual machine:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">OVMFKeys</span>
<span class="n">qemu</span><span class="o">-</span><span class="n">system</span><span class="o">-</span><span class="n">x86_64</span> <span class="o">-</span><span class="n">L</span> <span class="o">.</span> \
  <span class="o">-</span><span class="n">drive</span> <span class="k">if</span><span class="o">=</span><span class="n">pflash</span><span class="p">,</span><span class="nb">format</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span><span class="n">readonly</span><span class="p">,</span><span class="n">file</span><span class="o">=</span><span class="n">OVMF_CODE_QEMU</span><span class="o">.</span><span class="n">fd</span> \
  <span class="o">-</span><span class="n">drive</span> <span class="k">if</span><span class="o">=</span><span class="n">pflash</span><span class="p">,</span><span class="nb">format</span><span class="o">=</span><span class="n">raw</span><span class="p">,</span><span class="n">file</span><span class="o">=</span><span class="n">OVMF_VARS</span><span class="o">.</span><span class="n">fd</span> \
  <span class="o">-</span><span class="n">hda</span> <span class="n">fat</span><span class="p">:</span><span class="n">hda</span><span class="o">-</span><span class="n">contents</span> \
  <span class="o">-</span><span class="n">net</span> <span class="n">none</span>
</pre></div>
</div>
<p>After booting, you can see the UEFI shell.</p>
<a class="reference internal image-reference" href="../_images/waag_secure_boot_image5.png"><img alt="../_images/waag_secure_boot_image5.png" class="align-center" src="../_images/waag_secure_boot_image5.png" style="width: 600px;" /></a>
</li>
<li><p>Enter “exit” to close UEFI shell and enter UEFI configuration menu.</p>
<a class="reference internal image-reference" href="../_images/waag_secure_boot_image6.png"><img alt="../_images/waag_secure_boot_image6.png" class="align-center" src="../_images/waag_secure_boot_image6.png" style="width: 600px;" /></a>
</li>
<li><p>Go to secure boot configuration (Device Manager / Secure Boot
Configuration / Secure Boot Mode) and change from “Standard Mode”
to “Custom Mode”.</p>
<a class="reference internal image-reference" href="../_images/waag_secure_boot_image7.png"><img alt="../_images/waag_secure_boot_image7.png" class="align-center" src="../_images/waag_secure_boot_image7.png" style="width: 600px;" /></a>
<p>After change to “Custom Mode”, “Custom Secure Boot Options” will show
up, click and enter.</p>
<a class="reference internal image-reference" href="../_images/waag_secure_boot_image8.png"><img alt="../_images/waag_secure_boot_image8.png" class="align-center" src="../_images/waag_secure_boot_image8.png" style="width: 600px;" /></a>
</li>
<li><p>Import PK</p>
<p>PK Options / Enroll PK / Enroll PK Using File: select the only one
HD, space select <code class="docutils literal notranslate"><span class="pre">PKtestDer.cer</span></code>. (Note: only DER format certificate is
supported.)</p>
<a class="reference internal image-reference" href="../_images/waag_secure_boot_image9.png"><img alt="../_images/waag_secure_boot_image9.png" class="align-center" src="../_images/waag_secure_boot_image9.png" style="width: 600px;" /></a>
<p>Then, select “Commit Changes and Exit”, PK will be imported into
OVMF.</p>
</li>
<li><p>Import KEK</p>
<p>The process is the same as import PK, bit select “KEK options” to
inject “Microsoft Corporation KEK CA 2011”.</p>
<p>KEK Options / Enroll KEK / Enroll KEK Using File: select the only one
HD, space select <code class="docutils literal notranslate"><span class="pre">MicCorKEKCA2011_2011-06-24.crt</span></code>. Commit Changes
and Exit.</p>
</li>
<li><p>Import DB</p>
<p>Use the same process to inject “Microsoft Windows Production CA 2011”.</p>
<p>DB Options / Enroll Signature / Enroll Signature Using File: select the
only one HD, space select <code class="docutils literal notranslate"><span class="pre">MicWinProPCA2011_2011-10-19.crt</span></code>. Commit
Changes and Exit.</p>
<p>Repeat the steps to inject “Microsoft Corporation UEFI CA 2011”.</p>
<p>DB Options / Enroll Signature / Enroll Signature Using File: select the
only one HD, space select <code class="docutils literal notranslate"><span class="pre">MicCorUEFCA2011_2011-06-27.crt</span></code>. Commit
Changes and Exit.</p>
<p>After import PK, KEK and DB, the secure boot state is now “Enabled”.</p>
<a class="reference internal image-reference" href="../_images/waag_secure_boot_image10.png"><img alt="../_images/waag_secure_boot_image10.png" class="align-center" src="../_images/waag_secure_boot_image10.png" style="width: 600px;" /></a>
</li>
</ol>
</li>
<li><p>Generate <code class="docutils literal notranslate"><span class="pre">OVMF.fd</span></code> for ACRN with the updated keys manually:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cat</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">OVMF_VARS</span><span class="o">.</span><span class="n">fd</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">OVMF_CODE</span><span class="o">.</span><span class="n">fd</span> <span class="o">&gt;</span> <span class="n">OVMF</span><span class="o">.</span><span class="n">fd</span>
</pre></div>
</div>
</li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">OVMF.fd</span></code> into ACRNGT+OVMF+Win10 to start Windows.</p></li>
</ol>
<p>Notes:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>According to Microsoft documentation, after enabling secure boot, the kernel
mode driver must be signed by a trusted certification authority
(CA). Specify the acrn-dm parameter <code class="docutils literal notranslate"><span class="pre">--windows</span></code> to use the Windows
ORACLE virtio device driver. The default REDHAT virtio device driver is
not signed and may lead to problems in the secure boot process.</p></li>
<li><p>A cross-signed driver using a SHA-1 or SHA-256 certificate issued
after July 29th, 2015 is not recommended for Windows 10.</p></li>
<li><p>After enable secure boot, standard mechanisms such as kernel
debugging and test signing will not be permitted.</p></li>
</ol>
<p>See these references for more information:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.microsoft.com/en-us/windows/desktop/w8cookbook/secured-boot-signing-requirements-for-kernel-mode-drivers">https://docs.microsoft.com/en-us/windows/desktop/w8cookbook/secured-boot-signing-requirements-for-kernel-mode-drivers</a></p></li>
<li><p><a class="reference external" href="https://docs.microsoft.com/en-us/windows-hardware/drivers/dashboard/get-a-code-signing-certificate">https://docs.microsoft.com/en-us/windows-hardware/drivers/dashboard/get-a-code-signing-certificate</a></p></li>
</ul>
</div></blockquote>
</div>
</div>


           </div>
          </div>

          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rdt_configuration.html" class="btn btn-neutral float-left" title="Enable Intel Resource Director Technology (RDT) Configurations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="enable_s5.html" class="btn btn-neutral float-right" title="Enable S5 in ACRN" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2018-2022 Project ACRN™, a Series of LF Projects, LLC.

<span class="lastupdated">Last updated on Sep 21, 2021. Published on Aug 30, 2022</span>

  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=GTM-K4WWJZD"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'GTM-K4WWJZD', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>